{"version":3,"sources":["webpack://react-ssr/./src/utils/commonMethods.js","webpack://react-ssr/./src/components/appHeader/app.header.jsx","webpack://react-ssr/./src/components/appSimpleHeader/app.simple.header.jsx","webpack://react-ssr/./src/components/mapList/map.list.jsx","webpack://react-ssr/./src/components/modal/modal.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom-loader/ReactSvgPanZoomLoader.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom-loader/SvgLoaderSelectElement.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/constants.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/common.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/events/viewer-event.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/pan.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/utils/calculateBox.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/zoom.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/utils/mapRange.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/interactions.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/events/viewer-mouse-event.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/events/viewer-touch-event.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/utils/parseViewBox.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/interactions-touch.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/features/miniature.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui/cursor-polyfill.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/utils/RandomUID.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/utils/getDisplayName.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui/border-gradient.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui/selection.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-cursor.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-pan.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-zoom-in.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-zoom-out.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-fit.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/toolbar-button.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-edit.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/icon-undo.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-toolbar/toolbar.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-miniature/icon-arrow.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-miniature/miniature-toggle-button.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-miniature/miniature-mask.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/ui-miniature/miniature.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/viewer.js","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/events/event-factory.js","webpack://react-ssr/./src/components/schemaView/schema.view.jsx","webpack://react-ssr/./src/components/schemaView/react-svg-pan-zoom/uncontrolled-viewer.js","webpack://react-ssr/./src/components/app/app.component.jsx","webpack://react-ssr/./src/index.prod.js","webpack://react-ssr/webpack/bootstrap","webpack://react-ssr/webpack/runtime/compat get default export","webpack://react-ssr/webpack/runtime/define property getters","webpack://react-ssr/webpack/runtime/global","webpack://react-ssr/webpack/runtime/hasOwnProperty shorthand","webpack://react-ssr/webpack/runtime/node module decorator","webpack://react-ssr/webpack/runtime/jsonp chunk loading","webpack://react-ssr/webpack/startup"],"names":["renderSpinner","this","state","spinner","className","CircularProgress","color","switchStateField","fieldNames","fieldValues","newState","forEach","item","idx","setState","AppHeader","btnType","props","mode","previousMode","tmpSelectedMap","id","file_name","onClick","buttonClick","getButtonClass","renderButton","React","AppSimpleHeader","title","MapList","newSelection","selectedMap","undefined","fetchedData","locationFiles","length","map","key","onSelectItem","renderFileList","Modal","ReactDOM","document","querySelector","ReactSvgPanZoomLoader","useState","showModal","setShowModal","render","SvgLoader","path","src","onSVGReady","svgnode","doDraw","proxy","defaultProps","propTypes","PropTypes","MODE_IDLE","MODE_PANNING","MODE_ZOOMING","TOOL_AUTO","TOOL_NONE","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","POSITION_NONE","POSITION_TOP","POSITION_RIGHT","POSITION_BOTTOM","POSITION_LEFT","ACTION_ZOOM","ACTION_PAN","ALIGN_CENTER","ALIGN_LEFT","ALIGN_RIGHT","ALIGN_TOP","ALIGN_BOTTOM","ALIGN_COVER","INITIAL_VALUE","TOOL_EDIT","DEFAULT_MODE","getDefaultValue","viewerWidth","viewerHeight","SVGMinX","SVGMinY","SVGWidth","SVGHeight","scaleFactorMin","scaleFactorMax","set","identity","version","focus","pinchPointDistance","prePinchMode","startX","startY","endX","endY","miniatureOpen","lastAction","value","patch","action","Object","assign","freeze","getSVGPoint","viewerX","viewerY","matrix","fromObject","inverseMatrix","inverse","applyToPoint","x","y","decompose","scaleFactor","a","translationX","e","translationY","f","setSVGViewBox","resetMode","ViewerEvent","originalEvent","SVGViewer","preventDefault","stopPropagation","_cacheDecomposedValue","pan","SVGDeltaX","SVGDeltaY","panLimit","transform","translate","applyToPoints","x1","y1","x2","y2","moveX","moveY","startPanning","updatePanning","Error","start","end","stopPanning","autoPanIfNeeded","deltaX","deltaY","d","calculateBox","width","height","isZoomLevelGoingOutOfBounds","curScaleFactor","lessThanScaleFactorMin","moreThanScaleFactorMax","limitZoomLevel","scaleLevel","Math","max","min","zoom","SVGPointX","SVGPointY","scale","fitSelection","selectionSVGPointX","selectionSVGPointY","selectionWidth","selectionHeight","scaleX","scaleY","fitToViewer","SVGAlignX","SVGAlignY","scaleMatrix","translateX","translateY","remainderY","round","remainderX","translationMatrix","startZooming","updateZooming","stopZooming","abs","box","SVGPoint","mapRange","sourceStart","sourceEnd","targetStart","targetEnd","getMousePosition","event","ViewerDOM","getBoundingClientRect","left","top","clientX","clientY","onMouseDown","tool","coords","nextValue","onMouseMove","forceExit","buttons","preventPanOutside","onMouseUp","ViewerMouseEvent","_cachePoint","mousePosition","point","ViewerTouchEvent","_cachePoints","touchesToPoints","touches","_cacheChangedPoints","changedTouches","points","i","touch","rect","push","identifier","parseViewBox","viewBoxString","split","filter","Boolean","Number","hasPinchPointDistance","isMultiTouch","detectPinchGesture","onSingleTouch","nextValueFn","touchPosition","getTouchPosition","onMultiTouch","sqrt","pow","previousPointDistance","svgPoint","distanceFactor","cancelable","openMiniature","closeMiniature","userAgent","navigator","toLowerCase","cursor","indexOf","needPrefix","uid","RandomUID","WrappedComponent","_uid","displayName","name","getDisplayName","prefixID","BorderGradient","direction","gradientID","maskID","spreadMethod","offset","stopColor","stopOpacity","style","stroke","fill","mask","isRequired","Selection","strokeOpacity","fillOpacity","pointerEvents","IconCursor","IconPan","IconZoomIn","IconZoomOut","IconFit","ToolbarButton","hover","type","display","margin","toolbarPosition","active","activeColor","transition","background","padding","border","outline","onMouseEnter","change","onMouseLeave","onTouchStart","onTouchEnd","onTouchCancel","children","IconEdit","viewBox","IconUndo","Toolbar","onChangeValue","onChangeTool","activeToolColor","position","undo","handleChangeTool","isHorizontal","right","bottom","backgroundColor","borderRadius","flexDirection","role","handleFit","handleUndo","IconArrow","open","MiniatureToggleButton","MiniatureMask","zoomToFit","opacity","Miniature","SVGBackground","miniatureWidth","miniatureHeight","ratio","overflow","centerTranslation","ReactSVGPanZoom","context","defaultValue","SVGViewBox","pointerX","pointerY","autoPanLoop","bind","onWheel","prevProps","getValue","needUpdate","setViewerSize","setZoomLevels","setValue","autoPanIsRunning","requestAnimationFrame","addEventListener","removeEventListener","hasOwnProperty","onZoom","onPan","zoomOnViewerCenter","zoomLevel","setPointOnViewerCenter","getTool","target","onEventHandler","click","dblclick","onDoubleClick","mousemove","mouseup","mousedown","touchstart","touchmove","onTouchMove","touchend","touchcancel","eventType","eventFactory","detectAutoPan","onInterval","detectWheel","scaleFactorOnWheel","customToolbar","CustomToolbar","customMiniature","CustomMiniature","panningWithToolAuto","cursorPolyfill","blockChildEvents","touchAction","ref","handleViewerEvent","disableDoubleClickZoomWithToolAuto","modifierKeys","modifierKeysReducer","current","modifierKey","getModifierState","reduce","setFocus","onMouseEnterOrLeave","shouldResetPinchPointDistance","toSVG","SVGStyle","toolbarProps","miniatureProps","SchemaView","Viewer","useRef","setTool","svgLink","setSvgLink","needSave","setNeedSave","selectedCoords","setSelectedCoords","figures","setFigures","currentCi","properties","Id","subType","SubType","displayLabel","DisplayLabel","owner","related_properties","OwnedByPerson","Name","currentTitleObj","useEffect","cfg","thost","tid","doDrawOthersCIs","showOtherCIs","getOwnerName","relProps","ciColocated","entities","MapKey_c","MapX_c","MapY_c","drawFigure","removeElements","baseId","root","getElementsByTagName","oldCircle","getElementById","oldCircleText","oldCircleRect","removeChild","titleObj","circles","createElementNS","setAttribute","txt","tx","parseInt","toFixed","ty","newText","setAttributeNS","appendChild","createTextNode","getTitleNode","rootObj","childObj","textNode","addFigure","newFigures","label","undoFigure","pop","currPoint","onCancel","onSave","postParams","url","data","updtBody","srcObj","recType","tport","token","body","axios","withCredentials","headers","then","response","console","log","error","selectedPoint","content","class","checked","figure","mouseEnter","mouseLeave","href","b","c","propName","componentName","prop","types","join","disableZoomWithToolAuto","defaultTool","changeTool","changeValue","reset","App","msg","originalUrl","tgtObj","fileList","originalQuery","mapKey","mapName","window","initial_state","requestData","queryCoords","currentCiId","keys","find","stateFields","stateValues","getHeaderText","renderContent","fetchParams","instance","httpsAgent","https","rejectUnauthorized","objType","layout","get","err","fetchSMAXData","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","loaded","__webpack_modules__","call","m","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prototype","nmd","paths","installedChunks","deferredModules","checkDeferredModules","checkDeferredModulesImpl","result","deferredModule","fulfilled","j","depId","splice","s","chunkLoadingGlobal","slice","webpackJsonpCallback","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","parentChunkLoadingFunction","shift","apply","self"],"mappings":"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","file":"build/main.js","sourcesContent":["import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport axios from 'axios';\r\nimport https from 'https';\r\n\r\nexport function switchSpinnerState () {\r\n    let newState = { ...this.state };\r\n    newState.spinner = !this.state.spinner;\r\n\r\n    this.setState(newState);\r\n}\r\n\r\nexport function renderSpinner () {\r\n    if (this.state.spinner === true) {\r\n      return (\r\n        <div className=\"ui center aligned container\">\r\n            <CircularProgress color=\"secondary\" />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function switchStateField (fieldNames, fieldValues) {\r\n  let newState = { ...this.state };\r\n\r\n  fieldNames.forEach((item, idx) => {\r\n    newState[item] = fieldValues[idx];\r\n  });\r\n\r\n  this.setState(newState);\r\n}\r\n\r\nexport function fetchSMAXData ( fetchParams ) {\r\n  const instance = axios.create({\r\n      httpsAgent: new https.Agent({  \r\n        rejectUnauthorized: false\r\n      })\r\n  });\r\n\r\n  let url = `https://${fetchParams.thost}:${fetchParams.tport}/rest/${fetchParams.tid}/ems/${fetchParams.objType}?layout=${fetchParams.layout}`;\r\n  if (fetchParams.filter !== null) {\r\n      url += `&filter=${fetchParams.filter}`;\r\n  }\r\n\r\n  return instance.get(url,\r\n      { headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"User-Agent\": \"Apache-HttpClient/4.1\",\r\n          \"Cookie\": `TENANTID=${fetchParams.tid}`,\r\n          \"Cookie\": `SMAX_AUTH_TOKEN=${fetchParams.token}`\r\n      } }\r\n  ).then( response => {\r\n      return response.data;\r\n  }).catch( err => {\r\n    console.log(`ERROR fetching data: `);\r\n    console.log(fetchParams);\r\n    return null;\r\n  });\r\n}\r\n\r\nexport function postSMAXData ( postParams ) {\r\n\r\n  const url = `https://${postParams.thost}:${postParams.tport}/rest/${postParams.tid}/ems/bulk`;\r\n  const data = postParams.body;\r\n  return axios.post(\r\n    url,\r\n    data,\r\n    {\r\n      withCredentials: true,\r\n      headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        }\r\n    }\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nexport class AppHeader extends React.Component {\r\n\r\n    buttonClick(btnType) {\r\n        switch (btnType) {\r\n            case 'edit':\r\n                this.props.switchStateField(['mode', 'previousMode'], ['mapselection', this.props.state.mode]);\r\n                break;\r\n            case 'cancel':\r\n                this.props.switchStateField(['mode', 'previousMode', 'selectedMap', 'tmpSelectedMap'], [\r\n                    this.props.state.previousMode,\r\n                    this.props.state.mode,\r\n                    this.props.state.tmpSelectedMap,\r\n                    { id: null, file_name: null }\r\n                ]);             \r\n                break;\r\n            case 'save':\r\n                this.props.switchStateField(['mode', 'tmpSelectedMap'], [\r\n                    'mapview',\r\n                    { id: null, file_name: null }\r\n                ]);             \r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    getButtonClass() {\r\n        if (this.props.state.tmpSelectedMap.id !== null) return '';\r\n        return 'disabled';\r\n    }\r\n\r\n    renderButton() {\r\n        if (this.props.state.mode === 'mapview') {\r\n            return (\r\n                <button className={`ui compact icon button`} onClick={() => this.buttonClick('edit')}>\r\n                    <i className=\"cog icon\"></i>\r\n                </button> \r\n            )    \r\n        }\r\n\r\n        if (this.props.state.mode === 'mapselection') {\r\n            return (\r\n                <React.Fragment>\r\n                    <button className={`ui compact icon button green ${this.getButtonClass()}`} onClick={() => this.buttonClick('save')}>\r\n                        <i className=\"check icon\"></i>\r\n                    </button>\r\n                    <button className={`ui compact icon button red ${this.getButtonClass()}`} onClick={() => this.buttonClick('cancel')}>\r\n                        <i className=\"undo icon\"></i>\r\n                    </button>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    render() {    \r\n        return ( \r\n            <div className='ui container'>\r\n                <br />\r\n                    {this.renderButton()}\r\n                <br />\r\n            </div>\r\n\r\n        )    \r\n    }\r\n};\r\n","import React from \"react\";\r\n\r\nexport class AppSimpleHeader extends React.Component {\r\n    render() {\r\n        return (\r\n            <h1 className=\"ui header\">{this.props.title}</h1>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from \"react\";\r\n\r\nexport class MapList extends React.Component {\r\n    onSelectItem(id, file_name) {\r\n        let newSelection = {\r\n            id: id,\r\n            file_name: file_name\r\n        };\r\n\r\n        let selectedMap = this.props.state.selectedMap.id !== null ? this.props.state.selectedMap : newSelection;\r\n        this.props.switchStateField(['tmpSelectedMap', 'selectedMap'], [selectedMap, newSelection]);\r\n    }\r\n\r\n    renderFileList() {\r\n        if (this.props.state.fetchedData.locationFiles !== undefined) {\r\n            const locationFiles = this.props.state.fetchedData.locationFiles;\r\n\r\n            if (locationFiles.length > 0) {\r\n                return locationFiles.map((item, idx) => {\r\n                    return (\r\n                        <div className='item' key={item.id} onClick={() => this.onSelectItem(item.id, item.file_name)}>\r\n                            <i className={item.id === this.props.state.selectedMap.id ? 'large toggle on middle aligned icon green' : 'large toggle off middle aligned icon disabled'}></i>\r\n                            <div className=\"content\">\r\n                                <p className=\"header\">{`${idx + 1}). ${item.file_name}`}</p>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                });\r\n            }\r\n            \r\n        }\r\n\r\n        return '';\r\n    }    \r\n    render() {\r\n        return (\r\n            <div className=\"ui relaxed divided list\">\r\n                {this.renderFileList()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport const Modal = props => {\r\n    const {title} = props;\r\n    return  ReactDOM.createPortal(\r\n        <div\r\n            // onClick={() => history.push('')}\r\n            // onClick={props.onDismiss}\r\n            className='ui dimmer modals visible active'\r\n        >\r\n            <div\r\n                // onClick={(event)=> event.stopPropagation()}\r\n                className='ui standard modal visible active'\r\n            >\r\n                <div className='header'>{title}</div>\r\n                <div className='content'>\r\n                    <div className=\"ui center aligned container\">\r\n                        <CircularProgress />\r\n                    </div>\r\n                </div>\r\n                {/* <div className='actions'>\r\n                    {actions}\r\n                </div> */}\r\n            </div>\r\n        </div>,\r\n        document.querySelector('#modal')\r\n    );\r\n}\r\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { SvgLoader } from 'react-svgmt';\n\nimport { Modal } from '../../modal';\n// import history from '../../../utils/history';\n\n/**\n * Loading the svg file using react-svgmt\n * @param props\n * @returns {*}\n * @constructor\n */\nconst ReactSvgPanZoomLoader = (props) => {\n    const [showModal, setShowModal] = useState(true);\n\n    const renderModal = () => {\n        if (showModal === false) return '';\n    \n        return (\n            <Modal\n                title='Loading SVG file from SMAX attachment'\n                // onDismiss={() => history.push('')}\n            />\n        )    \n    }\n\n    return (\n        <div>\n            {props.render(\n                <SvgLoader path={props.src} onSVGReady={(svgnode) => {\n                        setShowModal(false);\n                        props.doDraw()\n                    }}>\n                    {props.proxy}\n                </SvgLoader>\n            )}\n            {renderModal()}\n        </div>\n    )\n}\n\nReactSvgPanZoomLoader.defaultProps = {\n    proxy: \"\"\n}\n\nReactSvgPanZoomLoader.propTypes = {\n    src: PropTypes.string.isRequired,\n    render: PropTypes.func.isRequired,\n    proxy: PropTypes.node\n}\n\nexport {ReactSvgPanZoomLoader}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { SvgProxy } from 'react-svgmt'\n\n/**\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nconst SvgLoaderSelectElement = (props) => {\n    const { selector, ...other } = props\n    return (\n        <SvgProxy selector={selector} {...other} />\n    )\n}\n\nSvgLoaderSelectElement.defaultProps = {\n    selector: PropTypes.string.isRequired\n}\n\nexport {SvgLoaderSelectElement}","export const MODE_IDLE = 'idle';\nexport const MODE_PANNING = 'panning';\nexport const MODE_ZOOMING = 'zooming';\n\nexport const TOOL_AUTO = 'auto';\nexport const TOOL_NONE = 'none';\nexport const TOOL_PAN = 'pan';\nexport const TOOL_ZOOM_IN = 'zoom-in';\nexport const TOOL_ZOOM_OUT = 'zoom-out';\n\nexport const POSITION_NONE = 'none';\nexport const POSITION_TOP = 'top';\nexport const POSITION_RIGHT = 'right';\nexport const POSITION_BOTTOM = 'bottom';\nexport const POSITION_LEFT = 'left';\n\nexport const ACTION_ZOOM = 'zoom';\nexport const ACTION_PAN = 'pan';\n\nexport const ALIGN_CENTER = 'center';\nexport const ALIGN_LEFT = 'left';\nexport const ALIGN_RIGHT = 'right';\nexport const ALIGN_TOP = 'top';\nexport const ALIGN_BOTTOM = 'bottom';\nexport const ALIGN_COVER = 'cover';\n\nexport const INITIAL_VALUE = {}\n\nexport const TOOL_EDIT = 'tool-edit';\nexport const TOOL_UNDO = 'tool-undo';\n","import {MODE_IDLE} from '../constants';\nimport {applyToPoint, fromObject, identity, inverse, scale, transform, translate} from 'transformation-matrix';\n\nconst VERSION = 3\nexport const DEFAULT_MODE = MODE_IDLE\n\n/**\n * Obtain default value\n * @returns {Object}\n */\nexport function getDefaultValue(viewerWidth, viewerHeight, SVGMinX, SVGMinY, SVGWidth, SVGHeight, scaleFactorMin = null, scaleFactorMax = null) {\n  return set({}, {\n    ...identity(),\n    version: VERSION,\n    mode: DEFAULT_MODE,\n    focus: false,\n    pinchPointDistance: null,\n    prePinchMode: null,\n    viewerWidth,\n    viewerHeight,\n    SVGMinX,\n    SVGMinY,\n    SVGWidth,\n    SVGHeight,\n    scaleFactorMin,\n    scaleFactorMax,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    miniatureOpen: true,\n    lastAction: null,\n  });\n}\n\n/**\n * Change value\n * @param value\n * @param patch\n * @param action\n * @returns {Object}\n */\nexport function set(value, patch, action = null) {\n  value = Object.assign({}, value, patch, {lastAction: action});\n  return Object.freeze(value);\n}\n\n/**\n * value valid check\n * @param value\n */\nexport function isValueValid(value) {\n  return value !== null\n    && typeof value === 'object'\n    && value.hasOwnProperty('version')\n    && value.version === VERSION;\n}\n\n/**\n * Export x,y coords relative to SVG\n * @param value\n * @param viewerX\n * @param viewerY\n * @returns {*|{x, y}|{x: number, y: number}}\n */\nexport function getSVGPoint(value, viewerX, viewerY) {\n  let matrix = fromObject(value);\n\n  let inverseMatrix = inverse(matrix);\n  return applyToPoint(inverseMatrix, {x: viewerX, y: viewerY});\n}\n\n/**\n * Decompose matrix from value\n * @param value\n * @returns {{scaleFactor: number, translationX: number, translationY: number}}\n */\nexport function decompose(value) {\n  let matrix = fromObject(value);\n\n  return {\n    scaleFactor: matrix.a,\n    translationX: matrix.e,\n    translationY: matrix.f\n  }\n}\n\n/**\n *\n * @param value\n * @param focus\n * @returns {Object}\n */\nexport function setFocus(value, focus) {\n  return set(value, {focus});\n}\n\n\n/**\n *\n * @param value\n * @param viewerWidth\n * @param viewerHeight\n * @returns {Object}\n */\nexport function setViewerSize(value, viewerWidth, viewerHeight) {\n  return set(value, {viewerWidth, viewerHeight});\n}\n\n/**\n *\n * @param value\n * @param SVGMinX\n * @param SVGMinY\n * @param SVGWidth\n * @param SVGHeight\n * @returns {Object}\n */\nexport function setSVGViewBox(value, SVGMinX, SVGMinY, SVGWidth, SVGHeight) {\n  return set(value, {SVGMinX, SVGMinY, SVGWidth, SVGHeight});\n}\n\n/**\n *\n * @param value\n * @param scaleFactorMin\n * @param scaleFactorMax\n * @returns {Object}\n */\n//TODO rename to setZoomLimits\nexport function setZoomLevels(value, scaleFactorMin, scaleFactorMax) {\n  return set(value, {scaleFactorMin, scaleFactorMax});\n}\n\n/**\n *\n * @param value\n * @param SVGPointX\n * @param SVGPointY\n * @param zoomLevel\n * @returns {Object}\n */\nexport function setPointOnViewerCenter(value, SVGPointX, SVGPointY, zoomLevel) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let matrix = transform(\n    translate(-SVGPointX + viewerWidth / 2, -SVGPointY + viewerHeight / 2),   //4\n    translate(SVGPointX, SVGPointY),                                          //3\n    scale(zoomLevel, zoomLevel),                                              //2\n    translate(-SVGPointX, -SVGPointY)                                         //1\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function reset(value) {\n  return set(value, {\n    mode: MODE_IDLE,\n    ...identity()\n  });\n}\n\n/**\n *\n * @param value\n * @returns {Object}\n */\nexport function resetMode(value) {\n  return set(value, {\n    mode: DEFAULT_MODE,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  })\n}\n","import {decompose} from '../features/common'\n\nexport default class ViewerEvent {\n  constructor(originalEvent, value, SVGViewer) {\n    this.originalEvent = originalEvent;\n    this.value = value;\n    this.SVGViewer = SVGViewer;\n  }\n\n  get scaleFactor() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.scaleFactor;\n  }\n\n  get translationX() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationX;\n  }\n\n  get translationY() {\n    this._cacheDecomposedValue = this._cacheDecomposedValue || decompose(this.value);\n    return this._cacheDecomposedValue.translationY;\n  }\n\n  preventDefault(){\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation(){\n    this.originalEvent.stopPropagation();\n  }\n}\n","import {ACTION_PAN, MODE_IDLE, MODE_PANNING} from '../constants';\nimport {set, getSVGPoint} from './common';\nimport {fromObject, translate, transform, applyToPoints} from 'transformation-matrix';\n\n/**\n * Atomic pan operation\n * @param value\n * @param SVGDeltaX drag movement\n * @param SVGDeltaY drag movement\n * @param panLimit forces the image to keep at least x pixel inside the viewer\n * @returns {Object}\n */\nexport function pan(value, SVGDeltaX, SVGDeltaY, panLimit = undefined) {\n\n  let matrix = transform(\n    fromObject(value),              //2\n    translate(SVGDeltaX, SVGDeltaY) //1\n  );\n\n  // apply pan limits\n  if (panLimit) {\n    let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(matrix, [\n      {x: value.SVGMinX + panLimit, y: value.SVGMinY + panLimit},\n      {x: value.SVGMinX + value.SVGWidth - panLimit, y: value.SVGMinY + value.SVGHeight - panLimit}\n    ]);\n\n    //x limit\n    let moveX = 0;\n    if (value.viewerWidth - x1 < 0)\n      moveX = value.viewerWidth - x1;\n    else if (x2 < 0) moveX = -x2;\n\n\n    //y limit\n    let moveY = 0;\n    if (value.viewerHeight - y1 < 0)\n      moveY = value.viewerHeight - y1;\n    else if (y2 < 0) moveY = -y2;\n\n    //apply limits\n    matrix = transform(\n      translate(moveX, moveY),\n      matrix\n    )\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n  }, ACTION_PAN);\n}\n\n/**\n * Start pan operation lifecycle\n * @param value\n * @param viewerX\n * @param viewerY\n * @return {ReadonlyArray<unknown>}\n */\nexport function startPanning(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_PANNING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  }, ACTION_PAN);\n}\n\n/**\n * Continue pan operation lifecycle\n * @param value\n * @param viewerX\n * @param viewerY\n * @param panLimit\n * @return {ReadonlyArray<unknown>}\n */\nexport function updatePanning(value, viewerX, viewerY, panLimit) {\n  if (value.mode !== MODE_PANNING) throw new Error('update pan not allowed in this mode ' + value.mode);\n\n  let {endX, endY} = value;\n\n  let start = getSVGPoint(value, endX, endY);\n  let end = getSVGPoint(value, viewerX, viewerY);\n\n  let deltaX = end.x - start.x;\n  let deltaY = end.y - start.y;\n\n  let nextValue = pan(value, deltaX, deltaY, panLimit);\n  return set(nextValue, {\n    mode: MODE_PANNING,\n    endX: viewerX,\n    endY: viewerY,\n  }, ACTION_PAN);\n}\n\n/**\n * Stop pan operation lifecycle\n * @param value\n * @return {ReadonlyArray<unknown>}\n */\nexport function stopPanning(value) {\n  return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    }, ACTION_PAN\n  );\n}\n\n/**\n * when pointer is on viewer edge -> pan image\n * @param value\n * @param viewerX\n * @param viewerY\n * @return {ReadonlyArray<any>}\n */\nexport function autoPanIfNeeded(value, viewerX, viewerY) {\n  let deltaX = 0;\n  let deltaY = 0;\n\n  if (viewerY <= 20) deltaY = 2;\n  if (value.viewerWidth - viewerX <= 20) deltaX = -2;\n  if (value.viewerHeight - viewerY <= 20) deltaY = -2;\n  if (viewerX <= 20) deltaX = 2;\n\n  deltaX = deltaX / value.d;\n  deltaY = deltaY / value.d;\n\n  return (deltaX === 0 && deltaY === 0) ? value : pan(value, deltaX, deltaY);\n}\n","export default function calculateBox(start, end) {\n  if (start.x <= end.x && start.y <= end.y) {\n    return {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y <= end.y) {\n    return {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y >= end.y) {\n    return {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else if (start.x <= end.x && start.y >= end.y) {\n    return {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  }\n}\n\n","import {fromObject, scale, transform, translate} from 'transformation-matrix';\n\nimport {\n  ACTION_ZOOM, MODE_IDLE, MODE_ZOOMING,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM, ALIGN_COVER\n} from '../constants';\nimport {decompose, getSVGPoint, set} from './common';\nimport calculateBox from '../utils/calculateBox';\n\nexport function isZoomLevelGoingOutOfBounds(value, scaleFactor) {\n  const {scaleFactor: curScaleFactor} = decompose(value)\n  const lessThanScaleFactorMin = value.scaleFactorMin && (curScaleFactor * scaleFactor) < value.scaleFactorMin;\n  const moreThanScaleFactorMax = value.scaleFactorMax && (curScaleFactor * scaleFactor) > value.scaleFactorMax;\n\n  return (lessThanScaleFactorMin && scaleFactor < 1) || (moreThanScaleFactorMax && scaleFactor > 1);\n}\n\nexport function limitZoomLevel(value, matrix) {\n  let scaleLevel = matrix.a;\n\n  if(value.scaleFactorMin != null) {\n    // limit minimum zoom\n    scaleLevel = Math.max(scaleLevel, value.scaleFactorMin);\n  }\n\n  if(value.scaleFactorMax != null) {\n    // limit maximum zoom\n    scaleLevel = Math.min(scaleLevel, value.scaleFactorMax);\n  }\n\n  return set(matrix, {\n    a: scaleLevel,\n    d: scaleLevel\n  });\n}\n\nexport function zoom(value, SVGPointX, SVGPointY, scaleFactor) {\n  if (isZoomLevelGoingOutOfBounds(value, scaleFactor)) {\n      // Do not change translation and scale of value\n      return value;\n  }\n\n  const matrix = transform(\n    fromObject(value),\n    translate(SVGPointX, SVGPointY),\n    scale(scaleFactor, scaleFactor),\n    translate(-SVGPointX, -SVGPointY)\n  );\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...matrix,\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\n//ENHANCEMENT: add ability to control alignment\n//ENHANCEMENT: add ability to selectively fit image inside viewer\n//ENHANCEMENT: refactor some logic in order to merge with fitToViewer function\nexport function fitSelection(value, selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n  let {viewerWidth, viewerHeight} = value;\n\n  let scaleX = viewerWidth / selectionWidth;\n  let scaleY = viewerHeight / selectionHeight;\n\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  const matrix = transform(\n    scale(scaleLevel, scaleLevel),                      //2\n    translate(-selectionSVGPointX, -selectionSVGPointY) //1\n  );\n\n  if(isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function fitToViewer(value, SVGAlignX=ALIGN_LEFT, SVGAlignY=ALIGN_TOP) {\n  let {viewerWidth, viewerHeight, SVGMinX, SVGMinY, SVGWidth, SVGHeight} = value;\n\n  let scaleX = viewerWidth / SVGWidth;\n  let scaleY = viewerHeight / SVGHeight;\n  let scaleLevel = Math.min(scaleX, scaleY);\n\n  let scaleMatrix = scale(scaleLevel, scaleLevel);\n\n  let translateX = -SVGMinX * scaleX;\n  let translateY = -SVGMinY * scaleY;\n\n // after fitting, SVG and the viewer will match in width (1) or in height (2) or SVG will cover the container with preserving aspect ratio (0)\n if (scaleX < scaleY) {\n    let remainderY = viewerHeight - scaleX * SVGHeight;\n\n    //(1) match in width, meaning scaled SVGHeight <= viewerHeight\n    switch(SVGAlignY) {\n      case ALIGN_TOP:\n        translateY = -SVGMinY * scaleLevel;\n      break;\n\n      case ALIGN_CENTER:\n        translateY = Math.round(remainderY / 2) - SVGMinY * scaleLevel;\n      break;\n\n      case ALIGN_BOTTOM:\n        translateY = remainderY - SVGMinY * scaleLevel;\n      break;\n\n      case ALIGN_COVER:\n        scaleMatrix = scale(scaleY, scaleY); // (0) we must now match to short edge, in this case - height\n        let remainderX = viewerWidth - scaleY * SVGWidth; // calculate remainder in the other scale\n\n        translateX = SVGMinX + Math.round(remainderX / 2); // center by the long edge\n      break;\n\n      default:\n        //no op\n    }\n  } else {\n    let remainderX = viewerWidth - scaleY * SVGWidth;\n\n    //(2) match in height, meaning scaled SVGWidth <= viewerWidth\n    switch(SVGAlignX) {\n      case ALIGN_LEFT:\n        translateX = -SVGMinX * scaleLevel;\n      break;\n\n      case ALIGN_CENTER:\n        translateX = Math.round(remainderX / 2) - SVGMinX * scaleLevel;\n      break;\n\n      case ALIGN_RIGHT:\n        translateX = remainderX - SVGMinX * scaleLevel;\n      break;\n\n      case ALIGN_COVER:\n        scaleMatrix = scale(scaleX, scaleX); // (0) we must now match to short edge, in this case - width\n        let remainderY = viewerHeight - scaleX * SVGHeight; // calculate remainder in the other scale\n\n        translateY = SVGMinY + Math.round(remainderY / 2); // center by the long edge\n      break;\n\n      default:\n        //no op\n    }\n  }\n\n  const translationMatrix = translate(translateX, translateY);\n\n  const matrix = transform(\n    translationMatrix, //2\n    scaleMatrix        //1\n  );\n\n  if (isZoomLevelGoingOutOfBounds(value, scaleLevel / value.d)) {\n    // Do not allow scale and translation\n    return set(value, {\n      mode: MODE_IDLE,\n      startX: null,\n      startY: null,\n      endX: null,\n      endY: null\n    });\n  }\n\n  return set(value, {\n    mode: MODE_IDLE,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null\n  }, ACTION_ZOOM);\n}\n\nexport function zoomOnViewerCenter(value, scaleFactor) {\n  let {viewerWidth, viewerHeight} = value;\n  let SVGPoint = getSVGPoint(value, viewerWidth / 2, viewerHeight / 2);\n  return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\n}\n\nexport function startZooming(value, viewerX, viewerY) {\n  return set(value, {\n    mode: MODE_ZOOMING,\n    startX: viewerX,\n    startY: viewerY,\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function updateZooming(value, viewerX, viewerY) {\n  if (value.mode !== MODE_ZOOMING) throw new Error('update selection not allowed in this mode ' + value.mode);\n\n  return set(value, {\n    endX: viewerX,\n    endY: viewerY\n  });\n}\n\nexport function stopZooming(value, viewerX, viewerY, scaleFactor) {\n  const TOLERATED_DISTANCE = 7 //minimum distance to choose if area selection or drill down on point\n  let {startX, startY} = value;\n\n  let start = getSVGPoint(value, startX, startY);\n  let end = getSVGPoint(value, viewerX, viewerY);\n\n  if (Math.abs(startX - viewerX) > TOLERATED_DISTANCE && Math.abs(startY - viewerY) > TOLERATED_DISTANCE) {\n    let box = calculateBox(start, end);\n    return fitSelection(value, box.x, box.y, box.width, box.height);\n  } else {\n    let SVGPoint = getSVGPoint(value, viewerX, viewerY);\n    return zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor);\n  }\n}\n","/**\n * Convert (re-map) an input value range into a destination range.\n * @param value\n * @param sourceStart\n * @param sourceEnd\n * @param targetStart\n * @param targetEnd\n * @return number\n */\n\nexport default function mapRange(value, sourceStart, sourceEnd, targetStart, targetEnd) {\n  return targetStart + (targetEnd - targetStart) * (value - sourceStart) / (sourceEnd - sourceStart);\n}\n","import {MODE_PANNING, MODE_ZOOMING, TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,} from '../constants';\nimport {getSVGPoint, setFocus} from './common';\nimport {autoPanIfNeeded, startPanning, stopPanning, updatePanning} from './pan';\nimport {startZooming, stopZooming, updateZooming, zoom} from './zoom';\nimport mapRange from '../utils/mapRange';\n\nexport function getMousePosition(event, ViewerDOM) {\n  let {left, top} = ViewerDOM.getBoundingClientRect();\n  let x = event.clientX - Math.round(left);\n  let y = event.clientY - Math.round(top);\n  return {x, y}\n}\n\nexport function onMouseDown(event, ViewerDOM, tool, value, props, coords = null) {\n  const {x, y} = coords || getMousePosition(event, ViewerDOM)\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      let SVGPoint = getSVGPoint(value, x, y);\n      nextValue = zoom(value, SVGPoint.x, SVGPoint.y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      nextValue = startZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      nextValue = startPanning(value, x, y);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseMove(event, ViewerDOM, tool, value, props, coords = null) {\n  const {x, y} = coords || getMousePosition(event, ViewerDOM)\n\n  let forceExit = (event.buttons === 0); //the mouse exited and reentered into svg\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = forceExit ? stopZooming(value, x, y, props.scaleFactor, props) : updateZooming(value, x, y);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = forceExit ? stopPanning(value) : updatePanning(value, x, y, props.preventPanOutside ? 20 : undefined);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseUp(event, ViewerDOM, tool, value, props, coords = null) {\n  const {x, y} = coords || getMousePosition(event, ViewerDOM)\n\n  let nextValue = value;\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, 1 / props.scaleFactor, props);\n      break;\n\n    case TOOL_ZOOM_IN:\n      if (value.mode === MODE_ZOOMING)\n        nextValue = stopZooming(value, x, y, props.scaleFactor, props);\n      break;\n\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      if (value.mode === MODE_PANNING)\n        nextValue = stopPanning(value);\n      break;\n\n    default:\n      return value;\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onDoubleClick(event, ViewerDOM, tool, value, props, coords = null) {\n  const {x, y} = coords || getMousePosition(event, ViewerDOM)\n\n  let nextValue = value;\n\n  if (tool === TOOL_AUTO && !props.disableDoubleClickZoomWithToolAuto) {\n    const {modifierKeys = []} = props;\n    let SVGPoint = getSVGPoint(value, x, y);\n    let modifierKeysReducer = (current, modifierKey) => current || event.getModifierState(modifierKey);\n    let modifierKeyActive = modifierKeys.reduce(modifierKeysReducer, false);\n    let scaleFactor = modifierKeyActive ? 1 / props.scaleFactor : props.scaleFactor;\n    nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n  }\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onWheel(event, ViewerDOM, tool, value, props, coords = null) {\n  const {x, y} = coords || getMousePosition(event, ViewerDOM)\n\n  if (!props.detectWheel) return value;\n\n  let delta = Math.max(-1, Math.min(1, event.deltaY));\n  let scaleFactor = mapRange(delta, -1, 1, props.scaleFactorOnWheel, 1 / props.scaleFactorOnWheel);\n\n  let SVGPoint = getSVGPoint(value, x, y);\n  let nextValue = zoom(value, SVGPoint.x, SVGPoint.y, scaleFactor, props);\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onMouseEnterOrLeave(event, ViewerDOM, tool, value, props, coords = null) {\n  let nextValue = setFocus(value, event.type === 'mouseenter');\n\n  event.preventDefault();\n  return nextValue;\n}\n\nexport function onInterval(event, ViewerDOM, tool, value, props, coords = null) {\n  let {x, y} = coords;\n\n  if (!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0)) return value;\n  if (!props.detectAutoPan) return value;\n  if (!value.focus) return value;\n\n  return autoPanIfNeeded(value, x, y);\n}\n","import ViewerEvent from './viewer-event';\nimport {getMousePosition} from \"../features/interactions\";\nimport {getSVGPoint} from \"../features/common\";\n\nexport default class ViewerMouseEvent extends ViewerEvent {\n  get point() {\n    if (!this._cachePoint) {\n      const {originalEvent: event, SVGViewer, value} = this;\n      const mousePosition = getMousePosition(event, SVGViewer)\n      this._cachePoint = getSVGPoint(value, mousePosition.x, mousePosition.y);\n    }\n    return this._cachePoint;\n  }\n\n  get x() {\n    return this.point.x;\n  }\n\n  get y() {\n    return this.point.y;\n  }\n}\n","import {getSVGPoint} from '../features/common'\nimport ViewerEvent from './viewer-event';\n\nexport default class ViewerTouchEvent extends ViewerEvent {\n  get points() {\n    if (!this._cachePoints)\n      this._cachePoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.touches, this.SVGViewer, this.value);\n\n    return this._cachePoints;\n  }\n\n  get changedPoints() {\n    if (!this._cacheChangedPoints)\n      this._cacheChangedPoints = ViewerTouchEvent.touchesToPoints(this.originalEvent.changedTouches, this.SVGViewer, this.value);\n\n    return this._cacheChangedPoints;\n  }\n\n  static touchesToPoints(touches, SVGViewer, value) {\n    let points = [];\n    for (let i = 0; i < touches.length; i++) {\n      let touch = touches[i];\n\n      let rect = SVGViewer.getBoundingClientRect();\n      let x = touch.clientX - Math.round(rect.left);\n      let y = touch.clientY - Math.round(rect.top);\n\n      let point = getSVGPoint(value, x, y);\n\n      points.push({...point, identifier: touch.identifier});\n    }\n    return points;\n  }\n}\n","export default function parseViewBox(viewBoxString) {\n  // viewBox specs: https://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  return viewBoxString\n    .split(/[ ,]/) // split optional comma\n    .filter(Boolean) // remove empty strings\n    .map(Number); // cast to Number\n}\n","import {transform, fromObject, translate, scale} from 'transformation-matrix';\nimport {\n  TOOL_PAN, TOOL_AUTO, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  MODE_IDLE, MODE_PANNING, MODE_ZOOMING\n} from '../constants';\nimport {resetMode, getSVGPoint, set} from './common';\nimport {onMouseDown, onMouseMove, onMouseUp} from './interactions';\nimport {isZoomLevelGoingOutOfBounds, limitZoomLevel} from './zoom';\n\nfunction getTouchPosition(touch, ViewerDOM) {\n  let {left, top} = ViewerDOM.getBoundingClientRect();\n  let x = touch.clientX - Math.round(left);\n  let y = touch.clientY - Math.round(top);\n\n  return { x, y };\n}\n\nexport function onTouchStart(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (event.touches.length !== 1) {\n    if ([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0){\n      return resetMode(value);\n    } else if([MODE_IDLE].indexOf(value.mode) >= 0){\n      return value;\n    }\n  }\n\n  return onSingleTouch(event, ViewerDOM, tool, value, props, onMouseDown);\n}\n\nexport function onTouchMove(event, ViewerDOM, tool, value, props) {\n  if (isMultiTouch(event, props)) {\n    return onMultiTouch(event, ViewerDOM, tool, value, props);\n  }\n\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  return onSingleTouch(event, ViewerDOM, tool, value, props, onMouseMove);\n}\n\nexport function onTouchEnd(event, ViewerDOM, tool, value, props) {\n  if (!([MODE_PANNING, MODE_ZOOMING].indexOf(value.mode) >= 0)) {\n    return value;\n  }\n\n  let nextValue = shouldResetPinchPointDistance(event, value, props) ? set(value, { pinchPointDistance: null }) : value;\n\n  if (event.touches.length > 0) {\n    return nextValue;\n  }\n\n  return onSingleTouch(event, ViewerDOM, tool, nextValue, props, onMouseUp);\n}\n\nexport function onTouchCancel(event, ViewerDOM, tool, value, props) {\n  event.stopPropagation();\n  event.preventDefault();\n\n  return resetMode(value);\n}\n\nfunction hasPinchPointDistance(value) {\n  return typeof value.pinchPointDistance === 'number';\n}\n\nfunction shouldResetPinchPointDistance(event, value, props) {\n  return props.detectPinchGesture && hasPinchPointDistance(value) && event.touches.length < 2;\n}\n\nfunction isMultiTouch(event, props) {\n  return props.detectPinchGesture && event.touches.length > 1;\n}\n\nfunction onSingleTouch(event, ViewerDOM, tool, value, props, nextValueFn) {\n  let nextValue = event.touches.length === 0 ? set(value, { mode: value.prePinchMode ? MODE_IDLE : value.mode, prePinchMode: null }) : value;\n  let touch = event.touches.length > 0 ? event.touches[0] : event.changedTouches[0];\n  let touchPosition = getTouchPosition(touch, ViewerDOM);\n\n  switch (tool) {\n    case TOOL_ZOOM_OUT:\n    case TOOL_ZOOM_IN:\n    case TOOL_AUTO:\n    case TOOL_PAN:\n      event.stopPropagation();\n      event.preventDefault();\n      return nextValueFn(event, ViewerDOM, tool, nextValue, props, touchPosition);\n\n    default:\n      return nextValue;\n  }\n}\n\nfunction onMultiTouch(event, ViewerDOM, tool, value, props) {\n  const {left, top} = ViewerDOM.getBoundingClientRect();\n  const x1 = event.touches[0].clientX - Math.round(left);\n  const y1 = event.touches[0].clientY - Math.round(top);\n  const x2 = event.touches[1].clientX - Math.round(left);\n  const y2 = event.touches[1].clientY - Math.round(top);\n  const pinchPointDistance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n  const previousPointDistance = hasPinchPointDistance(value) ? value.pinchPointDistance : pinchPointDistance;\n  const svgPoint = getSVGPoint(value, (x1 + x2) / 2, (y1 + y2) / 2);\n  let distanceFactor = pinchPointDistance/previousPointDistance;\n\n  if (isZoomLevelGoingOutOfBounds(value, distanceFactor)) {\n    // Do not change translation and scale of value\n    return value;\n  }\n\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n\n  let matrix = transform(\n    fromObject(value),\n    translate(svgPoint.x, svgPoint.y),\n    scale(distanceFactor, distanceFactor),\n    translate(-svgPoint.x, -svgPoint.y)\n  );\n\n  return set(value, set({\n    mode: MODE_ZOOMING,\n    ...limitZoomLevel(value, matrix),\n    startX: null,\n    startY: null,\n    endX: null,\n    endY: null,\n    prePinchMode: value.prePinchMode ? value.prePinchMode : value.mode,\n    pinchPointDistance\n  }));\n}\n","import {set} from './common';\n\n\nexport function openMiniature(value) {\n  return set(value, {\n    miniatureOpen: true\n  });\n}\n\nexport function closeMiniature(value) {\n  return set(value, {\n    miniatureOpen: false\n  });\n}\n\n","//specs: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\n\nlet needPrefix = (cursor) => ['zoom-in', 'zoom-out', 'grab', 'grabbing'].indexOf(cursor) > -1;\nlet userAgent = () => navigator.userAgent.toLowerCase();\nlet isFirefox = () => userAgent().indexOf('firefox') > -1;\nlet isWebkit = () => userAgent().indexOf('webkit') > -1;\n\n// eslint-disable-next-line\nexport default function (cursor) {\n  if (!needPrefix(cursor)) return cursor;\n  if (isFirefox()) return `-moz-${cursor}`;\n  if (isWebkit()) return `-webkit-${cursor}`;\n}\n\n\n","import React from \"react\";\nimport getDisplayName from \"./getDisplayName\";\n\nlet uid = 1;\nconst nextUID = () => `uid${uid++}`;\n\nexport default function RandomUID(WrappedComponent) {\n  class RandomUID extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {uid: nextUID()}\n    }\n\n    render() {\n      return <WrappedComponent _uid={this.state.uid} {...this.props}/>\n    }\n  }\n\n  RandomUID.displayName = `RandomUID(${getDisplayName(WrappedComponent)})`;\n\n  return RandomUID;\n}\n","//https://facebook.github.io/react/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging\nexport default function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT} from '../constants';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_border_gradient'\n\nfunction BorderGradient({direction, width, height, _uid}) {\n\n  let transform;\n\n  switch (direction) {\n    case POSITION_TOP:\n      transform = `translate(${width}, 0) rotate(90)`;\n      break;\n\n    case POSITION_RIGHT:\n      transform = `translate(${width}, ${height}) rotate(180)`;\n      break;\n\n    case POSITION_BOTTOM:\n      transform = `translate(0, ${height}) rotate(270)`;\n      break;\n\n    case POSITION_LEFT:\n    default:\n      transform = \" \";\n      break;\n  }\n\n  let gradientID = `${prefixID}_gradient_${_uid}`\n  let maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <linearGradient id={gradientID} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\" spreadMethod=\"pad\">\n          <stop offset=\"0%\" stopColor=\"#fff\" stopOpacity=\"0.8\"/>\n          <stop offset=\"100%\" stopColor=\"#000\" stopOpacity=\"0.5\"/>\n        </linearGradient>\n\n        <mask id={maskID} x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}>\n          <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n                style={{stroke: \"none\", fill: `url(#${gradientID})`}}/>\n        </mask>\n      </defs>\n\n      <rect x=\"0\" y=\"0\" width=\"20\" height={Math.max(width, height)}\n            style={{stroke: \"none\", fill: \"#000\", mask: `url(#${maskID})`}} transform={transform}/>\n    </g>\n  );\n}\n\nBorderGradient.propTypes = {\n  direction: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n\nexport default RandomUID(BorderGradient)\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport calculateBox from '../utils/calculateBox';\n\nexport default function Selection({startX, startY, endX, endY}) {\n  if (!startX || !startY || !endX || !endY) return null;\n\n  let box = calculateBox({x: startX, y: startY}, {x: endX, y: endY});\n\n  return (<rect\n    stroke=\"#969FFF\"\n    strokeOpacity={0.7}\n    fill=\"#F3F4FF\"\n    fillOpacity={0.7}\n    x={box.x}\n    y={box.y}\n    width={box.width}\n    height={box.height}\n    style={{pointerEvents: \"none\"}}/>);\n}\n\nSelection.propTypes = {\n  startX: PropTypes.number,\n  startY: PropTypes.number,\n  endX: PropTypes.number,\n  endY: PropTypes.number\n};\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconCursor() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://materialdesignicons.com/icon/cursor-move\n\nexport default function IconPan() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_in\n\nexport default function IconZoomIn() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g>\n        <path\n          d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\n//https://material.io/icons/#ic_zoom_out\n\nexport default function IconZoomOut() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n    </svg>\n  )\n}\n","import React from 'react';\n\n//credits https://materialdesignicons.com/icon/cursor-default-outline\n\nexport default function IconFit() {\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <path\n        d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  POSITION_TOP, POSITION_BOTTOM\n} from '../constants';\n\nexport default class ToolbarButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  change(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.type) {\n      case 'mouseenter':\n      case 'touchstart':\n        this.setState({hover: true});\n        break;\n      case 'mouseleave':\n      case 'touchend':\n      case 'touchcancel':\n        this.setState({hover: false});\n        break;\n      default:\n        //noop\n    }\n  }\n\n  render() {\n    let style = {\n      display: \"block\",\n      width: \"24px\",\n      height: \"24px\",\n      margin: [POSITION_TOP, POSITION_BOTTOM].indexOf(this.props.toolbarPosition) >= 0 ? \"2px 1px\" : \"1px 2px\",\n      color: this.props.active || this.state.hover ? this.props.activeColor : '#FFF',\n      transition: \"color 200ms ease\",\n      background: \"none\",\n      padding: \"0px\",\n      border: \"0px\",\n      outline: \"0px\",\n      cursor: \"pointer\"\n    };\n\n    return (\n      <button\n        onMouseEnter={e => this.change(e)}\n        onMouseLeave={e => this.change(e)}\n\n        onTouchStart={e => {\n          this.change(e);\n          this.props.onClick(e);\n        }}\n        onTouchEnd={e => this.change(e)}\n        onTouchCancel={e => this.change(e)}\n\n        onClick={this.props.onClick}\n\n        style={style}\n        title={this.props.title}\n        name={this.props.name}\n        type=\"button\"\n      >{this.props.children}</button>\n    )\n  }\n\n}\n\nToolbarButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  toolbarPosition: PropTypes.string.isRequired,\n  activeColor: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool.isRequired\n};\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconEdit() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path d=\"M12.012986958026886,16.46753191947937 c-3.1962481141090393,0 -5.753246605396271,-2.412698268890381 -5.753246605396271,-5.428571105003357 s2.5569984912872314,-5.428571105003357 5.753246605396271,-5.428571105003357 s5.753246605396271,2.412698268890381 5.753246605396271,5.428571105003357 s-2.5569984912872314,5.428571105003357 -5.753246605396271,5.428571105003357 zm0,-9.650793075561523 c-2.4930735290050507,0 -4.474747359752655,1.8698411583900456 -4.474747359752655,4.2222219705581665 s1.9816738307476045,4.2222219705581665 4.474747359752655,4.2222219705581665 s4.474747359752655,-1.8698411583900456 4.474747359752655,-4.2222219705581665 s-1.9816738307476045,-4.2222219705581665 -4.474747359752655,-4.2222219705581665 z\"/><path d=\"M13.765516988263187,20.623376583271238 h-2.9019701647437373 l-0.8061028235399266,-2.3204374471772096 c-0.5374018823599518,-0.15133287698981818 -1.0748037647199027,-0.3531100463095763 -1.558465458843859,-0.6053315079592726 l-2.364568282383786,1.1097744312586657 l-2.042127152967815,-1.916883108537695 l1.182284141191893,-2.2195488625173314 c-0.2687009411799768,-0.453998630969456 -0.4836616941239568,-0.9584415542688497 -0.644882258831943,-1.4628844775682421 L2.103896141052246,12.400956933491123 v-2.723991785816725 l2.472048658855776,-0.7566643849490907 c0.16122056470798574,-0.5044429232993939 0.3761813176519669,-1.0088858465987869 0.644882258831943,-1.4628844775682421 l-1.182284141191893,-2.2195488625173314 l2.042127152967815,-1.916883108537695 l2.364568282383786,1.1097744312586657 c0.4836616941239568,-0.2522214616496981 1.0210635764839076,-0.453998630969456 1.558465458843859,-0.6053315079592726 L10.863546823519453,1.454545497894287 h2.9019701647437373 l0.8061028235399266,2.3204374471772096 c0.5374018823599518,0.15133287698981818 1.0748037647199027,0.3531100463095763 1.558465458843859,0.6053315079592726 l2.364568282383786,-1.1097744312586657 l2.042127152967815,1.916883108537695 l-1.182284141191893,2.2195488625173314 c0.2687009411799768,0.453998630969456 0.4836616941239568,0.9584415542688497 0.644882258831943,1.4628844775682421 l2.472048658855776,0.7566643849490907 v2.723991785816725 l-2.472048658855776,0.7566643849490907 c-0.16122056470798574,0.5044429232993939 -0.3761813176519669,1.0088858465987869 -0.644882258831943,1.4628844775682421 l1.182284141191893,2.2195488625173314 l-2.042127152967815,1.916883108537695 l-2.364568282383786,-1.1097744312586657 c-0.4836616941239568,0.2522214616496981 -1.0210635764839076,0.453998630969456 -1.558465458843859,0.6053315079592726 L13.765516988263187,20.623376583271238 zm-2.1496075294398054,-1.0088858465987869 h1.3972448941358735 l0.7523626353039319,-2.169104570187392 l0.2687009411799768,-0.05044429232993939 c0.644882258831943,-0.15133287698981818 1.236024329427888,-0.4035543386395148 1.8271664000238343,-0.7062200926191539 l0.2687009411799768,-0.15133287698981818 l2.1496075294398054,1.0088858465987869 l0.9673233882479106,-0.9079972619389083 l-1.0748037647199027,-2.0177716931975738 l0.16122056470798574,-0.2522214616496981 c0.3224411294159713,-0.5044429232993939 0.5911420705959466,-1.1097744312586657 0.7523626353039319,-1.7151059392179375 l0.05374018823599563,-0.2522214616496981 l2.310828094147793,-0.7062200926191539 v-1.3115516005784231 l-2.310828094147793,-0.7062200926191539 l-0.05374018823599563,-0.2522214616496981 c-0.16122056470798574,-0.6053315079592726 -0.42992150588796313,-1.1602187235886048 -0.7523626353039319,-1.7151059392179375 l-0.16122056470798574,-0.2522214616496981 l1.0748037647199027,-2.0177716931975738 l-0.9673233882479106,-0.9079972619389083 l-2.1496075294398054,1.0088858465987869 l-0.2687009411799768,-0.15133287698981818 c-0.5911420705959466,-0.3026657539796375 -1.182284141191893,-0.5548872156293336 -1.8271664000238343,-0.7062200926191539 l-0.2687009411799768,-0.05044429232993939 L13.013154352959262,2.463431344493074 h-1.3972448941358735 l-0.7523626353039319,2.169104570187392 l-0.2687009411799768,0.05044429232993939 c-0.644882258831943,0.15133287698981818 -1.236024329427888,0.4035543386395148 -1.8271664000238343,0.7062200926191539 l-0.2687009411799768,0.15133287698981818 l-2.1496075294398054,-1.0088858465987869 l-0.9673233882479106,0.9079972619389083 l1.0748037647199027,2.0177716931975738 l-0.16122056470798574,0.2522214616496981 c-0.3224411294159713,0.5044429232993939 -0.5911420705959466,1.1097744312586657 -0.7523626353039319,1.7151059392179375 l-0.05374018823599563,0.2522214616496981 L3.1786999057721497,10.383185240293553 v1.3115516005784231 l2.310828094147793,0.7062200926191539 l0.05374018823599563,0.2522214616496981 c0.16122056470798574,0.6053315079592726 0.42992150588796313,1.1602187235886048 0.7523626353039319,1.7151059392179375 l0.16122056470798574,0.2522214616496981 l-1.0748037647199027,2.0177716931975738 l0.9673233882479106,0.9079972619389083 l2.1496075294398054,-1.0088858465987869 l0.2687009411799768,0.15133287698981818 c0.5911420705959466,0.3026657539796375 1.182284141191893,0.5548872156293336 1.8271664000238343,0.7062200926191539 l0.2687009411799768,0.05044429232993939 l0.7523626353039319,2.169104570187392 z\"/>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n//credits https://materialdesignicons.com/icon/cursor-default-outline\r\n\r\nexport default function IconUndo() {\r\n  return (\r\n    <svg width={24} height={24} stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n      <g>\r\n\t      <path d=\"M20.32336818915877,8.934695483669262 c-0.45280542425968157,-1.0139506476774387 -1.0616820496274741,-1.8886190624719208 -1.8263178117172614,-2.6239302202881682 C17.73225858315866,5.5754165935172075 16.82274692981281,4.990003578065706 15.768320377162611,4.554376168836033 C14.714010848657217,4.1187487596063574 13.607898632055951,3.901103859205895 12.449593646876167,3.901103859205895 c-1.0913671743571105,0 -2.147471073082695,0.19795107539007975 -3.168506736418078,0.594303370741903 C8.260285295412295,4.891684501204345 7.352607020334888,5.450351426689366 6.558130101322407,6.171558054593415 l-1.4479787515953941,-1.381756274776118 c-0.22277496364119945,-0.22135859311670641 -0.478823792452411,-0.27128712852398223 -0.7684975588680196,-0.15001067850766164 C4.044607503321307,4.7613301356594295 3.896103863576596,4.972035307246708 3.896103863576596,5.271869104023837 v4.7980534773391845 c0,0.1856096117169062 0.07056555931131672,0.34627371175399485 0.21165766988568482,0.48191727601598516 c0.14117012667089787,0.13568107630963017 0.3082415973897318,0.20354037048826493 0.5012534202047635,0.20354037048826493 h4.9894024294265105 c0.31190835392663807,0 0.5308995368861366,-0.1428083653610069 0.6571295810715526,-0.4284250960830208 c0.126152028088887,-0.2784519296229983 0.07423231584822312,-0.5247185223718857 -0.15599318501158424,-0.7390248505324938 l-1.525799807883994,-1.4778996528744255 c0.5198992672754171,-0.471263854486558 1.1137968021094637,-0.8335927226299688 1.7820046688882636,-1.0870991405731476 c0.6682468748270668,-0.253468905895542 1.3661008582872387,-0.3802971389624078 2.093756990621842,-0.3802971389624078 c0.7720862993083958,0 1.5091043632265895,0.14472147979058692 2.210742127368464,0.43375180684773307 c0.7017547882866685,0.2892178872953419 1.3084859709998908,0.6801309357395356 1.8208566849601673,1.1728141694278627 c0.5123317059120108,0.4925706975454124 0.9188345768811836,1.0762206467578874 1.2195866290040414,1.7510248717327115 c0.30047899578500536,0.6747292008795484 0.450933037942962,1.3832567566816705 0.450933037942962,2.1259577878827662 c0,0.7426635191534576 -0.1504150341096948,1.4511910749555836 -0.450933037942962,2.125882763787488 c-0.3007520521228583,0.6747292008795484 -0.7072549230920285,1.2583041259967453 -1.2195866290040414,1.7510248717327115 c-0.5123707139602777,0.49268323368832717 -1.1193359449630875,0.883708818275442 -1.8208566849601673,1.1728141694278627 c-0.7016377641418746,0.28910535115242436 -1.438655828060069,0.43367678275245714 -2.210742127368464,0.43367678275245714 c-0.883571301249657,0 -1.7188506387472908,-0.18564712376454495 -2.505916028589432,-0.5567913231030823 c-0.7869483656973462,-0.3711441993385343 -1.451450467890976,-0.8959002337580587 -1.9934672985326243,-1.5744931755444003 c-0.0519197122406649,-0.07134791460904488 -0.13734733794093235,-0.11426169710786092 -0.25616585295600625,-0.1286288113535305 c-0.11140698584473192,0 -0.20424614071534258,0.03207280073119566 -0.278478456563565,0.09625591424122544 l-1.5257607998357288,1.478049701064982 c-0.05933124141100766,0.05739343288740224 -0.090888752457362,0.13046690168783392 -0.09463352509079853,0.21955801483004306 c-0.003666756536906468,0.089466233618598 0.02055724143563507,0.1697045035180446 0.07247695367630005,0.24108993017472888 c0.8093779934496996,0.9424901969254776 1.7893381819620773,1.6725496680722887 2.9401536218749906,2.190028365249879 c1.1508154399129125,0.5175912333205096 2.3648629260633283,0.7765368981713148 3.6418694021133957,0.7765368981713148 c1.1583049851797858,0 2.2644172017810518,-0.21786997268629618 3.3187267302864476,-0.653309821677778 c1.0544265526501913,-0.4354023369438428 1.9636651496581936,-1.0210779367288156 2.7285739680858354,-1.7563515824974236 c0.7647527862345854,-0.7355737421497196 1.373512387457582,-1.6100545967060076 1.826434835862056,-2.6239302202881682 s0.6791691283412559,-2.0778673428097925 0.6791691283412559,-3.191525013111227 C21.00253731750002,11.012037657812112 20.77613460537019,9.948608619299062 20.32336818915877,8.934695483669262 z\"/>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT,\n  POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT,\n  ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT, ALIGN_TOP, ALIGN_BOTTOM, TOOL_EDIT, TOOL_UNDO\n} from '../constants';\n\nimport {fitToViewer} from '../features/zoom';\nimport IconCursor from './icon-cursor';\nimport IconPan from './icon-pan';\nimport IconZoomIn from './icon-zoom-in';\nimport IconZoomOut from './icon-zoom-out';\nimport IconFit from './icon-fit';\nimport ToolbarButton from './toolbar-button';\n\nimport IconEdit from './icon-edit';\nimport IconUndo from './icon-undo';\n\nexport default function Toolbar({tool, value, onChangeValue, onChangeTool, activeToolColor, position, SVGAlignX, SVGAlignY, undo }) {\n\n  let handleChangeTool = (event, tool) => {\n    onChangeTool(tool);\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let handleFit = event => {\n    onChangeValue(fitToViewer(value, SVGAlignX, SVGAlignY));\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let handleUndo = event => {\n    undo();\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  let isHorizontal = [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0;\n\n  let style = {\n    //position\n    position: \"absolute\",\n    transform: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"translate(-50%, 0px)\" : \"none\",\n    top: [POSITION_LEFT, POSITION_RIGHT, POSITION_TOP].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    left: [POSITION_TOP, POSITION_BOTTOM].indexOf(position) >= 0 ? \"50%\" : (POSITION_LEFT === position ? \"5px\" : \"unset\"),\n    right: [POSITION_RIGHT].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n    bottom: [POSITION_BOTTOM].indexOf(position) >= 0 ? \"5px\" : \"unset\",\n\n    //inner styling\n    backgroundColor: \"rgba(19, 20, 22, 0.90)\",\n    borderRadius: \"2px\",\n    display: \"flex\",\n    flexDirection: isHorizontal ? \"row\" : \"column\",\n    padding: isHorizontal ? \"1px 2px\" : \"2px 1px\"\n  };\n\n  return (\n    <div style={style} role=\"toolbar\">\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_NONE}\n        activeColor={activeToolColor}\n        name=\"unselect-tools\"\n        title=\"Selection\"\n        onClick={ event => handleChangeTool(event, TOOL_NONE) }>\n        <IconCursor/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_PAN}\n        activeColor={activeToolColor}\n        name=\"select-tool-pan\"\n        title=\"Pan\"\n        onClick={ event => handleChangeTool(event, TOOL_PAN) }>\n        <IconPan/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_IN}\n        activeColor={activeToolColor}\n        name=\"select-tool-zoom-in\"\n        title=\"Zoom in\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_IN) }>\n        <IconZoomIn/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_ZOOM_OUT}\n        activeColor={activeToolColor}\n        name=\"select-tool-zoom-out\"\n        title=\"Zoom out\"\n        onClick={ event => handleChangeTool(event, TOOL_ZOOM_OUT) }>\n        <IconZoomOut/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={false}\n        activeColor={activeToolColor}\n        name=\"fit-to-viewer\"\n        title=\"Fit to viewer\"\n        onClick={ event => handleFit(event) }>\n        <IconFit/>\n      </ToolbarButton>\n{/* ********************** */}\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_EDIT}\n        activeColor={activeToolColor}\n        name=\"edit-mode\"\n        title=\"Edit Mode\"\n        onClick={ event => handleChangeTool(event, TOOL_EDIT) }>\n        <IconEdit/>\n      </ToolbarButton>\n\n      <ToolbarButton\n        toolbarPosition={position}\n        active={tool === TOOL_UNDO}\n        activeColor={activeToolColor}\n        name=\"undo-mode\"\n        title=\"Undo Mode\"\n        onClick={ event => handleUndo(event) }>\n        <IconUndo/>\n      </ToolbarButton>\n    \n    </div>\n  )\n}\n\nToolbar.propTypes = {\n  tool: PropTypes.string.isRequired,\n  onChangeTool: PropTypes.func.isRequired,\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n  SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n  SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n  activeToolColor: PropTypes.string\n};\n\nToolbar.defaultProps = {\n  position: POSITION_RIGHT,\n  SVGAlignX: ALIGN_LEFT,\n  SVGAlignY: ALIGN_TOP,\n  activeToolColor: '#1CA6FC'\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\n//credits https://materialdesignicons.com/icon/chevron-up\n\nexport default function IconArrow({open, position}) {\n\n  let transform = 0;\n\n  switch (position){\n    case POSITION_LEFT:\n      transform = open ? \"rotate(225, 12, 13)\" : \"rotate(45, 12, 13)\";\n      break;\n\n    case POSITION_RIGHT:\n      transform = transform = open ? \"rotate(135, 12, 13)\" : \"rotate(-45, 12, 13)\";\n      break;\n\n    default:\n      //no op\n  }\n\n  return (\n    <svg width={24} height={24} stroke=\"currentColor\">\n      <g transform={transform}>\n        <path fill=\"#000000\" d=\"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z\"/>\n      </g>\n    </svg>\n  );\n}\n\nIconArrow.propTypes = {\n  open: PropTypes.bool.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {openMiniature, closeMiniature} from '../features/miniature';\nimport IconArrow from './icon-arrow';\nimport {POSITION_RIGHT, POSITION_LEFT} from '../constants';\n\nexport default function MiniatureToggleButton({value, onChangeValue, position}) {\n  let style = {\n    width: \"24px\",\n    height: \"24px\",\n    display: \"block\",\n    position: \"absolute\",\n    bottom: 0,\n    [position === POSITION_LEFT ? 'left' : 'right']: '0px',\n    background: \"rgba(19, 20, 22, 0.901961)\",\n    border: 0,\n    padding: 0,\n    outline: 0,\n    color: \"#fff\"\n  };\n\n  let action = value.miniatureOpen ? closeMiniature : openMiniature;\n\n  return (\n    <button type=\"button\" style={style} onClick={() => onChangeValue(action(value))}>\n      <IconArrow open={value.miniatureOpen} position={position}/>\n    </button>\n  )\n\n}\n\nMiniatureToggleButton.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]).isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport RandomUID from \"../utils/RandomUID\";\n\nconst prefixID = 'react-svg-pan-zoom_miniature'\n\nfunction MiniatureMask({SVGMinX, SVGMinY, SVGWidth, SVGHeight, x1, y1, x2, y2, zoomToFit, _uid}) {\n  const maskID = `${prefixID}_mask_${_uid}`\n\n  return (\n    <g>\n      <defs>\n        <mask id={maskID}>\n          <rect x={SVGMinX} y={SVGMinY} width={SVGWidth} height={SVGHeight} fill=\"#ffffff\"/>\n          <rect x={x1} y={y1} width={x2 - x1} height={y2 - y1}/>\n        </mask>\n      </defs>\n\n      <rect\n        x={SVGMinX}\n        y={SVGMinY}\n        width={SVGWidth}\n        height={SVGHeight}\n        style={{\n          stroke: \"none\",\n          fill: \"#000\",\n          mask: `url(#${maskID})`,\n          opacity: 0.4\n        }}\n      />\n    </g>)\n}\n\nMiniatureMask.propTypes = {\n  SVGWidth: PropTypes.number.isRequired,\n  SVGHeight: PropTypes.number.isRequired,\n  SVGMinX: PropTypes.number.isRequired,\n  SVGMinY: PropTypes.number.isRequired,\n  x1: PropTypes.number.isRequired,\n  y1: PropTypes.number.isRequired,\n  x2: PropTypes.number.isRequired,\n  y2: PropTypes.number.isRequired,\n  zoomToFit: PropTypes.number.isRequired,\n}\n\nexport default RandomUID(MiniatureMask)\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {POSITION_LEFT, POSITION_RIGHT,} from '../constants';\nimport {applyToPoints, inverse} from 'transformation-matrix';\nimport MiniatureToggleButton from './miniature-toggle-button';\nimport MiniatureMask from './miniature-mask';\n\nexport default function Miniature(props) {\n\n  let {value, onChangeValue, children, position, background, SVGBackground, width: miniatureWidth, height: miniatureHeight} = props;\n  let {SVGMinX, SVGMinY, SVGWidth, SVGHeight, viewerWidth, viewerHeight} = value;\n\n  let ratio = SVGHeight / SVGWidth;\n\n  let zoomToFit = ratio >= 1\n    ? miniatureHeight / SVGHeight\n    : miniatureWidth / SVGWidth;\n\n  let [{x: x1, y: y1}, {x: x2, y: y2}] = applyToPoints(inverse(value), [\n    {x: 0, y: 0},\n    {x: viewerWidth, y: viewerHeight}\n  ]);\n\n  let width, height;\n  if (value.miniatureOpen) {\n    width = miniatureWidth;\n    height = miniatureHeight;\n  } else {\n    width = 24;\n    height = 24;\n  }\n\n  let style = {\n    position: \"absolute\",\n    overflow: \"hidden\",\n    outline: \"1px solid rgba(19, 20, 22, 0.90)\",\n    transition: \"width 200ms ease, height 200ms ease, bottom 200ms ease\",\n    width: width + \"px\",\n    height: height + \"px\",\n    bottom: \"6px\",\n    [position === POSITION_LEFT ? 'left' : 'right']: \"6px\",\n    background\n  };\n\n  let centerTranslation = ratio >= 1\n    ? `translate(${(miniatureWidth - (SVGWidth * zoomToFit)) / 2 - SVGMinX * zoomToFit}, ${ - SVGMinY * zoomToFit})`\n    : `translate(${ - SVGMinX * zoomToFit}, ${(miniatureHeight - (SVGHeight * zoomToFit)) / 2 - SVGMinY * zoomToFit})`;\n\n  return (\n    <div role=\"navigation\" style={style}>\n      <svg\n        width={miniatureWidth}\n        height={miniatureHeight}\n        style={{pointerEvents: \"none\"}}>\n        <g transform={centerTranslation}>\n          <g transform={`scale(${zoomToFit}, ${zoomToFit})`}>\n\n            <rect\n              fill={SVGBackground}\n              x={SVGMinX}\n              y={SVGMinY}\n              width={SVGWidth}\n              height={SVGHeight}/>\n\n            {children}\n\n            <MiniatureMask\n              SVGWidth={SVGWidth}\n              SVGHeight={SVGHeight}\n              SVGMinX={SVGMinX}\n              SVGMinY={SVGMinY}\n              x1={x1}\n              y1={y1}\n              x2={x2}\n              y2={y2}\n              zoomToFit={zoomToFit}\n            />\n\n          </g>\n        </g>\n      </svg>\n      <MiniatureToggleButton value={value} onChangeValue={onChangeValue} position={position}/>\n    </div>\n  )\n}\n\nMiniature.propTypes = {\n  value: PropTypes.object.isRequired,\n  onChangeValue: PropTypes.func.isRequired,\n  SVGBackground: PropTypes.string.isRequired,\n\n  //customizations\n  position: PropTypes.oneOf([POSITION_RIGHT, POSITION_LEFT]),\n  background: PropTypes.string.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nMiniature.defaultProps = {\n  position: POSITION_LEFT,\n  background: \"#616264\",\n  width: 100,\n  height: 80,\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {toSVG} from 'transformation-matrix';\n//events\nimport eventFactory from './events/event-factory';\n//features\nimport {pan} from './features/pan';\nimport {\n  getDefaultValue,\n  isValueValid,\n  reset,\n  setPointOnViewerCenter,\n  setSVGViewBox,\n  setViewerSize,\n  setZoomLevels\n} from './features/common';\nimport {\n  onDoubleClick,\n  onInterval,\n  onMouseDown,\n  onMouseEnterOrLeave,\n  onMouseMove,\n  onMouseUp,\n  onWheel\n} from './features/interactions';\nimport parseViewBox from './utils/parseViewBox';\nimport {onTouchCancel, onTouchEnd, onTouchMove, onTouchStart} from './features/interactions-touch';\n\nimport {fitSelection, fitToViewer, zoom, zoomOnViewerCenter} from './features/zoom';\nimport {closeMiniature, openMiniature} from './features/miniature';\n//ui\nimport cursorPolyfill from './ui/cursor-polyfill';\nimport BorderGradient from './ui/border-gradient';\nimport Selection from './ui/selection';\nimport Toolbar from './ui-toolbar/toolbar';\nimport detectTouch from './ui/detect-touch';\nimport Miniature from './ui-miniature/miniature'\n\nimport {\n  ACTION_PAN,\n  ACTION_ZOOM,\n  ALIGN_BOTTOM,\n  ALIGN_CENTER,\n  ALIGN_LEFT,\n  ALIGN_RIGHT,\n  ALIGN_TOP,\n  MODE_IDLE,\n  MODE_PANNING,\n  MODE_ZOOMING,\n  POSITION_BOTTOM,\n  POSITION_LEFT,\n  POSITION_NONE,\n  POSITION_RIGHT,\n  POSITION_TOP,\n  TOOL_AUTO,\n  TOOL_NONE,\n  TOOL_PAN,\n  TOOL_ZOOM_IN,\n  TOOL_ZOOM_OUT,\n  TOOL_EDIT\n} from './constants';\nimport {printMigrationTipsRelatedToProps} from \"./migration-tips\";\n\nexport default class ReactSVGPanZoom extends React.Component {\n\n  constructor(props, context) {\n    const {width: viewerWidth, height: viewerHeight, scaleFactorMin, scaleFactorMax, children} = props;\n    const {viewBox: SVGViewBox} = children.props;\n    let defaultValue;\n    if (SVGViewBox) {\n      const [SVGMinX, SVGMinY, SVGWidth, SVGHeight] = parseViewBox(SVGViewBox);\n      defaultValue = getDefaultValue(viewerWidth, viewerHeight, SVGMinX, SVGMinY, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\n    } else {\n      const {width: SVGWidth, height: SVGHeight} = children.props;\n      defaultValue = getDefaultValue(viewerWidth, viewerHeight, 0, 0, SVGWidth, SVGHeight, scaleFactorMin, scaleFactorMax)\n    }\n\n    super(props, context);\n    this.ViewerDOM = null;\n    this.state = {\n      pointerX: null,\n      pointerY: null,\n      defaultValue\n    }\n    this.autoPanLoop = this.autoPanLoop.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n  }\n\n  /** React hooks **/\n  componentDidUpdate(prevProps) {\n    const value = this.getValue();\n    const props = this.props\n\n    let nextValue = value;\n    let needUpdate = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      printMigrationTipsRelatedToProps(props)\n    }\n\n    // This block checks the size of the SVG\n    const {viewBox: SVGViewBox} = props.children.props;\n    if (SVGViewBox) {\n      // if the viewBox prop is specified\n      const [x, y, width, height] = parseViewBox(SVGViewBox);\n\n      if(value.SVGMinX !== x || value.SVGMinY !== y || value.SVGWidth !== width || value.SVGHeight !== height) {\n        nextValue = setSVGViewBox(nextValue, x, y, width, height);\n        needUpdate = true;\n      }\n    } else {\n      // if the width and height props are specified\n      const {width: SVGWidth, height: SVGHeight} = props.children.props;\n      if (value.SVGWidth !== SVGWidth || value.SVGHeight !== SVGHeight) {\n        nextValue = setSVGViewBox(nextValue, 0, 0, SVGWidth, SVGHeight);\n        needUpdate = true;\n      }\n    }\n\n    // This block checks the size of the viewer\n    if (\n      prevProps.width !== props.width ||\n      prevProps.height !== props.height\n    ) {\n      nextValue = setViewerSize(nextValue, props.width, props.height);\n      needUpdate = true;\n    }\n\n    // This blocks checks the scale factors\n    if (\n      prevProps.scaleFactorMin !== props.scaleFactorMin ||\n      prevProps.scaleFactorMax !== props.scaleFactorMax\n    ) {\n      nextValue = setZoomLevels(nextValue, props.scaleFactorMin, props.scaleFactorMax);\n      needUpdate = true;\n    }\n\n    if (needUpdate) {\n      this.setValue(nextValue);\n    }\n  }\n\n  componentDidMount() {\n    this.autoPanIsRunning = true;\n    requestAnimationFrame(this.autoPanLoop);\n    this.ViewerDOM.addEventListener('wheel', this.onWheel, false);\n  }\n\n  componentWillUnmount() {\n    this.autoPanIsRunning = false;\n    this.ViewerDOM.removeEventListener('wheel', this.onWheel);\n  }\n\n  /** ReactSVGPanZoom handlers **/\n  getValue() {\n    if (isValueValid(this.props.value)) return this.props.value\n    return this.state.defaultValue\n  }\n\n  getTool() {\n    if (this.props.tool) return this.props.tool\n    return TOOL_NONE\n  }\n\n  setValue(nextValue) {\n    let {onChangeValue, onZoom, onPan} = this.props;\n\n    if (onChangeValue) onChangeValue(nextValue);\n    if (nextValue.lastAction) {\n      if (onZoom && nextValue.lastAction === ACTION_ZOOM) onZoom(nextValue);\n      if (onPan && nextValue.lastAction === ACTION_PAN) onPan(nextValue);\n    }\n  }\n\n  /** ReactSVGPanZoom methods **/\n  pan(SVGDeltaX, SVGDeltaY) {\n    let nextValue = pan(this.getValue(), SVGDeltaX, SVGDeltaY);\n    this.setValue(nextValue);\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    let nextValue = zoom(this.getValue(), SVGPointX, SVGPointY, scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    let nextValue = fitSelection(this.getValue(), selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight);\n    this.setValue(nextValue);\n  }\n\n  fitToViewer(SVGAlignX = ALIGN_LEFT, SVGAlignY = ALIGN_TOP) {\n    let nextValue = fitToViewer(this.getValue(), SVGAlignX, SVGAlignY);\n    this.setValue(nextValue);\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    let nextValue = zoomOnViewerCenter(this.getValue(), scaleFactor);\n    this.setValue(nextValue);\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    let nextValue = setPointOnViewerCenter(this.getValue(), SVGPointX, SVGPointY, zoomLevel);\n    this.setValue(nextValue);\n  }\n\n  reset() {\n    let nextValue = reset(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  openMiniature() {\n    let nextValue = openMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  closeMiniature() {\n    let nextValue = closeMiniature(this.getValue());\n    this.setValue(nextValue);\n  }\n\n  /** ReactSVGPanZoom internals **/\n  handleViewerEvent(event) {\n    let {props, ViewerDOM} = this;\n\n    // if (!([TOOL_NONE, TOOL_AUTO].indexOf(this.getTool()) >= 0)) return;\n    if (!([TOOL_EDIT].indexOf(this.getTool()) >= 0)) return;\n    if (event.target === ViewerDOM) return;\n\n    let eventsHandler = {\n      click: props.onClick,\n      dblclick: props.onDoubleClick,\n\n      mousemove: props.onMouseMove,\n      mouseup: props.onMouseUp,\n      mousedown: props.onMouseDown,\n\n      touchstart: props.onTouchStart,\n      touchmove: props.onTouchMove,\n      touchend: props.onTouchEnd,\n      touchcancel: props.onTouchCancel,\n    };\n\n    let onEventHandler = eventsHandler[event.type];\n    if (!onEventHandler) return;\n\n    onEventHandler(eventFactory(event, props.value, ViewerDOM));\n  }\n\n  autoPanLoop() {\n    let coords = {x: this.state.pointerX, y: this.state.pointerY};\n    let nextValue = onInterval(null, this.ViewerDOM, this.getTool(), this.getValue(), this.props, coords);\n    if (this.getValue() !== nextValue) {\n      this.setValue(nextValue);\n    }\n\n    if (this.autoPanIsRunning) {\n      requestAnimationFrame(this.autoPanLoop);\n    }\n  }\n\n  onWheel(event) {\n    let nextValue = onWheel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n    if (this.getValue() !== nextValue) this.setValue(nextValue);\n  }\n\n  /** React renderer **/\n  render() {\n    let {props, state: {pointerX, pointerY}} = this;\n    let tool = this.getTool();\n    let value = this.getValue();\n    let {customToolbar: CustomToolbar = Toolbar, customMiniature: CustomMiniature = Miniature} = props;\n    \n    let panningWithToolAuto = tool === TOOL_AUTO\n      && value.mode === MODE_PANNING\n      && value.startX !== value.endX\n      && value.startY !== value.endY;\n\n    let cursor;\n\n    if (tool === TOOL_PAN)\n      cursor = cursorPolyfill(value.mode === MODE_PANNING ? 'grabbing' : 'grab');\n\n    if (tool === TOOL_ZOOM_IN)\n      cursor = cursorPolyfill('zoom-in');\n\n    if (tool === TOOL_ZOOM_OUT)\n      cursor = cursorPolyfill('zoom-out');\n\n    if (panningWithToolAuto)\n      cursor = cursorPolyfill('grabbing');\n\n    if (tool === TOOL_EDIT)\n    cursor = cursorPolyfill('pointer');\n\n    let blockChildEvents = [TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT].indexOf(tool) >= 0;\n    blockChildEvents = blockChildEvents || panningWithToolAuto;\n\n    const touchAction = (this.props.detectPinchGesture || [TOOL_PAN, TOOL_AUTO].indexOf(this.getTool()) !== -1) ? 'none' : undefined\n\n    const style = {display: 'block', cursor, touchAction};\n\n    return (\n      <div\n        style={{position: \"relative\", width: value.viewerWidth, height: value.viewerHeight, ...props.style}}\n        className={this.props.className}>\n        <svg\n          ref={ViewerDOM => this.ViewerDOM = ViewerDOM}\n          width={value.viewerWidth}\n          height={value.viewerHeight}\n          style={style}\n          \n          onMouseDown={event => {\n            let nextValue = onMouseDown(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onMouseMove={event => {\n            let {left, top} = this.ViewerDOM.getBoundingClientRect();\n            let x = event.clientX - Math.round(left);\n            let y = event.clientY - Math.round(top);\n\n            let nextValue = onMouseMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props, {x, y});\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.setState({pointerX: x, pointerY: y});\n            this.handleViewerEvent(event);\n          }}\n          onMouseUp={event => {\n            let nextValue = onMouseUp(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onClick={event => {\n            this.handleViewerEvent(event)\n          }}\n          onDoubleClick={event => {\n            let nextValue = onDoubleClick(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n\n          onMouseEnter={event => {\n            // DISABLED to switch off the movement of a MAP\n            // if (detectTouch()) return;\n            // let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            // if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n          onMouseLeave={event => {\n            let nextValue = onMouseEnterOrLeave(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n          }}\n\n          onTouchStart={event => {\n            let nextValue = onTouchStart(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchMove={event => {\n            let nextValue = onTouchMove(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchEnd={event => {\n            let nextValue = onTouchEnd(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}\n          onTouchCancel={event => {\n            let nextValue = onTouchCancel(event, this.ViewerDOM, this.getTool(), this.getValue(), this.props);\n            if (this.getValue() !== nextValue) this.setValue(nextValue);\n            this.handleViewerEvent(event);\n          }}>\n\n          <rect\n            fill={props.background}\n            x={0}\n            y={0}\n            width={value.viewerWidth}\n            height={value.viewerHeight}\n            style={{pointerEvents: \"none\"}}\n          />\n\n          <g\n            transform={toSVG(value)}\n            style={blockChildEvents ? {pointerEvents: \"none\"} : {}}>\n            <rect\n              fill={this.props.SVGBackground}\n              style={this.props.SVGStyle}\n              x={value.SVGMinX || 0}\n              y={value.SVGMinY || 0}\n              width={value.SVGWidth}\n              height={value.SVGHeight}/>\n            <g>\n              {props.children.props.children}\n            </g>\n          </g>\n\n          {!([TOOL_NONE, TOOL_AUTO].indexOf(tool) >= 0 && props.detectAutoPan && value.focus) ? null : (\n            <g style={{pointerEvents: \"none\"}}>\n              {!(pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_TOP} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerWidth - pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_RIGHT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.viewerHeight - pointerY <= 20) ? null :\n                <BorderGradient direction={POSITION_BOTTOM} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n\n              {!(value.focus && pointerX <= 20) ? null :\n                <BorderGradient direction={POSITION_LEFT} width={value.viewerWidth} height={value.viewerHeight}/>\n              }\n            </g>\n          )}\n\n          {!(value.mode === MODE_ZOOMING) ? null :\n            <Selection startX={value.startX} startY={value.startY} endX={value.endX} endY={value.endY}/>\n          }\n        </svg>\n\n        {props.toolbarProps.position === POSITION_NONE ? null :\n          <CustomToolbar\n            {...this.props.toolbarProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            tool={tool}\n            onChangeTool={tool => this.props.onChangeTool(tool)}\n            undo={this.props.undo}\n          />}\n\n        {props.miniatureProps.position === POSITION_NONE ? null :\n          <CustomMiniature\n            {...this.props.miniatureProps}\n            value={value}\n            onChangeValue={value => this.setValue(value)}\n            SVGBackground={this.props.SVGBackground}\n          >\n            {props.children.props.children}\n          </CustomMiniature>\n        }\n      </div>\n    );\n  }\n}\n\nReactSVGPanZoom.propTypes = {\n  /**************************************************************************/\n  /*  Viewer configuration                                                  */\n  /**************************************************************************/\n\n  /**\n   *   width of the viewer displayed on screen\n   */\n  width: PropTypes.number.isRequired,\n\n  /**\n  * height of the viewer displayed on screen\n  */\n  height: PropTypes.number.isRequired,\n\n  /**\n  * value of the viewer (current camera view)\n  */\n  value: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.shape({\n      version: PropTypes.oneOf([2]).isRequired,\n      mode: PropTypes.oneOf([MODE_IDLE, MODE_PANNING, MODE_ZOOMING]).isRequired,\n      focus: PropTypes.bool.isRequired,\n      a: PropTypes.number.isRequired,\n      b: PropTypes.number.isRequired,\n      c: PropTypes.number.isRequired,\n      d: PropTypes.number.isRequired,\n      e: PropTypes.number.isRequired,\n      f: PropTypes.number.isRequired,\n      viewerWidth: PropTypes.number.isRequired,\n      viewerHeight: PropTypes.number.isRequired,\n      SVGMinX: PropTypes.number.isRequired,\n      SVGMinY: PropTypes.number.isRequired,\n      SVGWidth: PropTypes.number.isRequired,\n      SVGHeight: PropTypes.number.isRequired,\n      startX: PropTypes.number,\n      startY: PropTypes.number,\n      endX: PropTypes.number,\n      endY: PropTypes.number,\n      miniatureOpen: PropTypes.bool.isRequired,\n    })\n  ]).isRequired,\n\n  /**\n  * handler something changed\n  */\n  onChangeValue: PropTypes.func.isRequired,\n\n  /**\n  * current active tool (TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT)\n  */\n  tool: PropTypes.oneOf([TOOL_AUTO, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT, TOOL_EDIT]).isRequired,\n\n  /**\n  * handler tool changed\n  */\n  onChangeTool: PropTypes.func.isRequired,\n\n  /**************************************************************************/\n  /* Customize style                                                        */\n  /**************************************************************************/\n\n  /**\n  * background of the viewer\n  */\n  background: PropTypes.string,\n\n  /**\n  * background of the svg\n  */\n  SVGBackground: PropTypes.string,\n\n  /**\n  * style of the svg\n  */\n  SVGStyle: PropTypes.object,\n\n  /**\n  * CSS style of the Viewer\n  */\n  style: PropTypes.object,\n\n  /**\n  * className of the Viewer\n  */\n  className: PropTypes.string,\n\n  /**************************************************************************/\n  /* Detect events                                                          */\n  /**************************************************************************/\n\n  /**\n  * perform zoom operation on mouse scroll\n  */\n  detectWheel: PropTypes.bool,\n\n  /**\n  * perform PAN if the mouse is on viewer border\n  */\n  detectAutoPan: PropTypes.bool,\n\n  /**\n  * perform zoom operation on pinch gesture\n  */\n  detectPinchGesture: PropTypes.bool,\n\n  /**\n  * handler zoom level changed\n  */\n  onZoom: PropTypes.func,\n\n  /**\n  * handler pan action performed\n  */\n  onPan: PropTypes.func,\n\n  /**\n  * handler click\n  */\n  onClick: PropTypes.func,\n\n  /**\n  * handler double click\n  */\n  onDoubleClick: PropTypes.func,\n\n  /**\n  * handler mouseup\n  */\n  onMouseUp: PropTypes.func,\n\n  /**\n  * handler mousemove\n  */\n  onMouseMove: PropTypes.func,\n\n  /**\n  * handler mousedown\n  */\n  onMouseDown: PropTypes.func,\n\n  /**************************************************************************/\n  /* Some advanced configurations                                           */\n  /**************************************************************************/\n\n  /**\n  * if disabled the user can move the image outside the viewer\n  */\n  preventPanOutside: PropTypes.bool,\n\n  /**\n  * how much scale in or out\n  */\n  scaleFactor: PropTypes.number,\n\n  /**\n  * how much scale in or out on mouse wheel (requires detectWheel enabled)\n  */\n  scaleFactorOnWheel: PropTypes.number,\n\n  /**\n  * maximum amount of scale a user can zoom in to\n  */\n  scaleFactorMax: PropTypes.number,\n\n  /**\n  * minimum amount of a scale a user can zoom out of\n  */\n  scaleFactorMin: PropTypes.number,\n\n  /**\n  * modifier keys //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState\n  */\n  modifierKeys: PropTypes.array,\n\n  /**\n  * Turn off zoom on double click\n  */\n  disableDoubleClickZoomWithToolAuto: PropTypes.bool,\n\n  /**************************************************************************/\n  /* Miniature configurations                                                 */\n  /**************************************************************************/\n\n  /**\n  * override miniature component\n  */\n  customMiniature: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  /**\n  * miniature props\n  */\n  miniatureProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_RIGHT, POSITION_LEFT]),\n    background: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  }),\n\n  /**************************************************************************/\n  /* Toolbar configurations                                                 */\n  /**************************************************************************/\n\n  /**\n  * override toolbar component\n  */\n  customToolbar: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n\n  /**\n  * toolbar props\n  */\n  toolbarProps: PropTypes.shape({\n    position: PropTypes.oneOf([POSITION_NONE, POSITION_TOP, POSITION_RIGHT, POSITION_BOTTOM, POSITION_LEFT]),\n    SVGAlignX: PropTypes.oneOf([ALIGN_CENTER, ALIGN_LEFT, ALIGN_RIGHT]),\n    SVGAlignY: PropTypes.oneOf([ALIGN_CENTER, ALIGN_TOP, ALIGN_BOTTOM]),\n    activeToolColor: PropTypes.string,\n  }),\n\n  /**************************************************************************/\n  /* Children Check                                                         */\n  /**************************************************************************/\n  /**\n  * accept only one node SVG\n  */\n  children: function (props, propName, componentName) {\n    // Only accept a single child, of the appropriate type\n    //credits: http://www.mattzabriskie.com/blog/react-validating-children\n    let prop = props[propName];\n    let types = ['svg'];\n    if (React.Children.count(prop) !== 1 ||\n      types.indexOf(prop.type) === -1) {\n      return new Error(\n        '`' + componentName + '` ' +\n        'should have a single child of the following types: ' +\n        ' `' + types.join('`, `') + '`.'\n      );\n    }\n    if (\n      (!prop.props.hasOwnProperty('width') || !prop.props.hasOwnProperty('height')) &&\n      (!prop.props.hasOwnProperty('viewBox'))\n    ) {\n      return new Error('SVG should have props `width` and `height` or `viewBox`');\n    }\n\n  }\n};\n\nReactSVGPanZoom.defaultProps = {\n  style: {},\n  background: \"#616264\",\n  SVGBackground: \"#fff\",\n  SVGStyle: {},\n  detectWheel: true,\n  detectAutoPan: true,\n  detectPinchGesture: true,\n  modifierKeys: [\"Alt\", \"Shift\", \"Control\"],\n  preventPanOutside: true,\n  scaleFactor: 1.1,\n  scaleFactorOnWheel: 1.06,\n  disableZoomWithToolAuto: false,\n  onZoom: null,\n  onPan: null,\n  toolbarProps: {},\n  miniatureProps: {},\n};\n","import ViewerMouseEvent from './viewer-mouse-event';\nimport ViewerTouchEvent from './viewer-touch-event';\n\nexport default function eventFactory(originalEvent, value, SVGViewer) {\n\n  let eventType = originalEvent.type;\n\n  switch (eventType) {\n    case \"mousemove\":\n    case \"mouseup\":\n    case \"mousedown\":\n    case \"click\":\n    case \"dblclick\":\n      return new ViewerMouseEvent(originalEvent, value, SVGViewer);\n\n    case \"touchstart\":\n    case \"touchmove\":\n    case \"touchend\":\n    case \"touchcancel\":\n      return new ViewerTouchEvent(originalEvent, value, SVGViewer);\n\n    default:\n      throw new Error(`${eventType} not supported`);\n  }\n}\n","import React, { useRef, useState, useEffect } from 'react';\r\nimport {ReactSvgPanZoomLoader} from './react-svg-pan-zoom-loader';\r\nimport {INITIAL_VALUE, ReactSVGPanZoom, TOOL_NONE, Toolbar, fitSelection, zoomOnViewerCenter, fitToViewer} from './react-svg-pan-zoom';\r\nimport { Modal } from '../modal';\r\nimport { postSMAXData } from '../../utils/commonMethods';\r\n\r\nexport function SchemaView(props) {\r\n    const Viewer = useRef(null);\r\n    const border = useRef(null);\r\n    const [tool, setTool] = useState(TOOL_NONE);\r\n    const [value, setValue] = useState(INITIAL_VALUE);\r\n    const [svgLink, setSvgLink] = useState(null);\r\n    const [needSave, setNeedSave] = useState(false);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedCoords, setSelectedCoords] = useState({});\r\n    const [figures, setFigures] = useState([]);\r\n    const [currentTitleObj, setCurrentTitleObj] = useState({\r\n      id: props.state.currentCi.properties.Id,\r\n      subType: props.state.currentCi.properties.SubType,\r\n      displayLabel: props.state.currentCi.properties.DisplayLabel,\r\n      owner: props.state.currentCi.related_properties.OwnedByPerson.Name\r\n    });\r\n    \r\n    useEffect(() => {\r\n        if (svgLink != null) {\r\n          Viewer.current.fitToViewer();\r\n        }\r\n        \r\n      }, [svgLink]);\r\n\r\n    useEffect(() => {\r\n        if (props.state.selectedMap.id !== null) {\r\n          setSvgLink(`https://${props.state.cfg.thost}/rest/${props.state.cfg.tid}/frs/file-list/${props.state.selectedMap.id}`);\r\n          //setSvgLink(`http://${props.state.cfg.thost}:4050/att/instance?id=${props.state.selectedMap.id}&token=${props.state.token}`);\r\n        }\r\n    }, [props.state.selectedMap.id]);\r\n\r\n    useEffect(() => {\r\n        doDrawOthersCIs();\r\n    }, [props.state.showOtherCIs]);\r\n \r\n    const renderModal = () => {\r\n        if (showModal === false) return '';\r\n    \r\n        return (\r\n            <Modal\r\n                title='Saving coordinates in SMAX record'\r\n            />\r\n        )    \r\n    }\r\n\r\n    const getOwnerName = ( relProps ) => {\r\n      if (relProps.OwnedByPerson !== undefined) {\r\n        return relProps.OwnedByPerson.Name\r\n      } else {\r\n        return 'OWNER NOT SELECTED';\r\n      }\r\n    }\r\n    \r\n    const renderList = () => {\r\n      if (props.state.showOtherCIs === true) {\r\n        if (props.state.fetchedData.ciColocated.entities !== undefined) {\r\n          if (props.state.fetchedData.ciColocated.entities.length > 0) {\r\n              return (\r\n                <div className=\"ui relaxed divided list\">\r\n                  {props.state.fetchedData.ciColocated.entities.filter(\r\n                    item => (item.properties.Id != props.state.currentCi.properties.Id && item.properties.MapKey_c === props.state.selectedMap.id)\r\n                  ).map( (item, idx) => {\r\n                    return (\r\n                      <div className=\"item\" key={`${idx}-${item.properties.Id}`}>\r\n                        <i className='large server middle aligned icon'></i>\r\n                        <div className=\"content\" onMouseEnter={e => mouseEnter(e, item.properties.Id)} onMouseLeave={e => mouseLeave(e, item.properties.Id)}>\r\n                          <a href={`https://${props.state.cfg.thost}/saw/Device/${item.properties.Id}/general?TENANTID=${props.state.cfg.tid}`} className=\"header\" target=\"_blank\">{item.properties.DisplayLabel}</a>\r\n                          <div className=\"description\">{getOwnerName(item.related_properties)}</div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )\r\n          }\r\n        }\r\n      }\r\n\r\n      return '';\r\n    }\r\n\r\n    const mouseEnter = ( e, id ) => {\r\n      e.preventDefault();\r\n\r\n      let figure = Viewer.current.ViewerDOM.getElementById(`${id}-rect`);    \r\n\r\n      if ( figure !== null) {\r\n        figure.setAttributeNS(null,\"fill\",\"gold\");\r\n      }\r\n    }\r\n\r\n    const mouseLeave = ( e, id ) => {\r\n      e.preventDefault();\r\n\r\n      let figure = Viewer.current.ViewerDOM.getElementById(`${id}-rect`);    \r\n\r\n      if ( figure !== null) {\r\n        figure.setAttributeNS(null,\"fill\",\"white\");\r\n      }\r\n    }\r\n\r\n    const renderContent = () => {\r\n        if (svgLink !== null) {\r\n          return (\r\n            <div ref={border}>\r\n              <ReactSvgPanZoomLoader\r\n                src={svgLink}\r\n                doDraw={doDrawFigure}\r\n                render={(content) => {\r\n                  return (\r\n                    <React.Fragment>\r\n                      <ReactSVGPanZoom\r\n                        ref={Viewer}\r\n                        width={1100}\r\n                        height={600}\r\n                        tool={tool}\r\n                        onChangeTool={setTool}\r\n                        value={value}\r\n                        onChangeValue={setValue}\r\n                        undo={undoFigure}\r\n                        Toolbar={Toolbar}\r\n                        onClick={event => onClick(event)}\r\n                      >\r\n                      <svg width={2500} height={1200}>\r\n                          {content}\r\n                      </svg>\r\n                      </ReactSVGPanZoom>\r\n                      <div className=\"ui hidden divider\"></div>\r\n                      <div className=\"ui menu\">\r\n                        <div className=\"ui buttons\">\r\n                            <button className={needSave === true ? 'ui button' : 'ui button disabled'} onClick={onCancel}>Clear</button>\r\n                            <div className=\"or\"></div>\r\n                            <button className={needSave === true ? 'ui positive button' : 'ui positive button disabled'} onClick={onSave}>Save</button>\r\n                        </div>\r\n                        <div className=\"right menu\">\r\n                            <div class=\"item\">\r\n                                <div className=\"ui checkbox\">\r\n                                    <input type=\"checkbox\" checked={props.state.showOtherCIs} name=\"example\" onClick={()=> {\r\n                                        props.switchStateField(['showOtherCIs'], [!props.state.showOtherCIs]);\r\n                                    }} />\r\n                                    <label>Show other CIs</label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                    </React.Fragment>\r\n                  )\r\n                }}/>\r\n            </div>\r\n      \r\n        )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    LOADING        \r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const doDrawFigure = () => {\r\n        if (\r\n            (props.state.selectedMap.id !== null) && \r\n            (props.state.selectedMap.file_name !== null) && \r\n            (props.state.selectedPoint.x !== null) && \r\n            (props.state.selectedPoint.y !== null) &&\r\n            (props.state.selectedMap.id === props.state.currentCi.properties.MapKey_c)\r\n            ) {\r\n          addFigure(props.state.selectedPoint.x, props.state.selectedPoint.y, 'red', currentTitleObj);\r\n        }\r\n    }\r\n\r\n    const doDrawOthersCIs = () => {\r\n      if (props.state.showOtherCIs === true) {\r\n        if (props.state.fetchedData.ciColocated.entities !== undefined) {\r\n            if (props.state.fetchedData.ciColocated.entities.length > 0) {\r\n                props.state.fetchedData.ciColocated.entities.forEach(item => {\r\n                  if (item.properties.MapKey_c === props.state.selectedMap.id) {\r\n                    if (item.properties.Id != props.state.currentCi.properties.Id) {\r\n                      const x = item.properties.MapX_c || 0;\r\n                      const y = item.properties.MapY_c || 0;\r\n                      const DisplayLabel = item.properties.DisplayLabel;\r\n\r\n                      drawFigure(x, y, 'green', {\r\n                        id: item.properties.Id,\r\n                        subType: item.properties.SubType,\r\n                        displayLabel: DisplayLabel,\r\n                        owner: getOwnerName(item.related_properties)\r\n                      });\r\n                    }\r\n                  }\r\n                });\r\n            }\r\n        }\r\n      } else {\r\n        props.state.fetchedData.ciColocated.entities.forEach(item => {\r\n          if (Viewer.current != null && props.state.currentCi.properties.Id != item.properties.Id) {\r\n            removeElements(item.properties.Id);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    const removeElements = (baseId) => {\r\n      let root = Viewer.current.ViewerDOM.getElementsByTagName('svg')[0];\r\n      let oldCircle = Viewer.current.ViewerDOM.getElementById(baseId);    \r\n      let oldCircleText = Viewer.current.ViewerDOM.getElementById(`${baseId}-text`);    \r\n      let oldCircleRect = Viewer.current.ViewerDOM.getElementById(`${baseId}-rect`); \r\n\r\n      if ( oldCircle !== null) {\r\n        root.removeChild(oldCircle);\r\n      }\r\n\r\n      if ( oldCircleText !== null) {\r\n        root.removeChild(oldCircleText);\r\n      }\r\n      \r\n      if ( oldCircleRect !== null) {\r\n        root.removeChild(oldCircleRect);\r\n      }  \r\n    }\r\n\r\n    const drawFigure = (x, y, color, titleObj) => {\r\n        if (Viewer.current !== null) {\r\n          let root = Viewer.current.ViewerDOM.getElementsByTagName('svg')[0];\r\n          let oldCircle = Viewer.current.ViewerDOM.getElementById(titleObj.id);    \r\n          let oldCircleText = Viewer.current.ViewerDOM.getElementById(`${titleObj.id}-text`);    \r\n          let oldCircleRect = Viewer.current.ViewerDOM.getElementById(`${titleObj.id}-rect`);    \r\n      \r\n          let circles = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\r\n          circles.setAttribute(\"cx\",x);\r\n          circles.setAttribute(\"cy\",y);\r\n          circles.setAttribute(\"r\",10);\r\n          circles.setAttribute(\"stroke\", color);\r\n          circles.setAttribute(\"stroke-width\", 3);\r\n          circles.setAttribute(\"fill\", color);\r\n          circles.setAttribute(\"id\", titleObj.id);\r\n      \r\n          if ( oldCircle !== null) {\r\n            root.removeChild(oldCircle);\r\n          }\r\n  \r\n          if ( oldCircleText !== null) {\r\n            root.removeChild(oldCircleText);\r\n          }\r\n          \r\n          if ( oldCircleRect !== null) {\r\n            root.removeChild(oldCircleRect);\r\n          }\r\n  \r\n          let rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n  \r\n          rect.setAttribute('width', '300');\r\n          rect.setAttribute('height', '40');\r\n          rect.setAttribute('x', x - 20);\r\n          rect.setAttribute('y', y - 21);\r\n          rect.setAttribute('fill', '#fff');\r\n          rect.setAttribute('stroke', color);\r\n          rect.setAttribute('stroke-width', '2');\r\n          rect.setAttribute('rx', '7');\r\n          rect.setAttribute('id', `${titleObj.id}-rect`);\r\n  \r\n          const txt = `Id:${titleObj.id}\\nSubType:${titleObj.subType}\\nOwner:${titleObj.owner}`;\r\n  \r\n          let tx = parseInt(new Number(x).toFixed()) + 20, ty = parseInt(new Number(y).toFixed()) + 7;        \r\n          let newText = document.createElementNS(\"http://www.w3.org/2000/svg\",\"text\");\r\n          newText.setAttributeNS(null,\"x\", tx);\r\n          newText.setAttributeNS(null,\"y\", ty);\r\n          newText.setAttributeNS(null,\"fill\", color);\r\n          newText.setAttributeNS(null,\"width\",\"100%\");\r\n          newText.setAttributeNS(null,\"height\",\"auto\");\r\n          newText.setAttributeNS(null,\"font-size\",\"22\");\r\n          newText.setAttributeNS(null,\"id\",`${titleObj.id}-text`);\r\n          newText.appendChild(document.createTextNode(titleObj.displayLabel));\r\n          \r\n          circles.appendChild(getTitleNode(txt));\r\n          rect.appendChild(getTitleNode(txt));\r\n          newText.appendChild(getTitleNode(txt));  \r\n  \r\n          root.appendChild(rect);\r\n          root.appendChild(circles);\r\n          root.appendChild(newText);\r\n  \r\n          if (titleObj.id === props.state.currentCi.properties.Id) {\r\n              setSelectedCoords({x, y, rootObj: root, childObj: [circles, rect, newText]});\r\n          }\r\n        }\r\n    }\r\n\r\n    const getTitleNode = (txt) => {\r\n      let title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\r\n      let textNode = document.createTextNode(txt);\r\n      title.appendChild(textNode);\r\n\r\n      return title;\r\n    }\r\n\r\n    const addFigure = (x, y, color, titleObj) => {\r\n        drawFigure(x, y, color, titleObj);\r\n        let newFigures = figures;\r\n\r\n        const id = titleObj.id;\r\n        const label = titleObj.displayLabel;\r\n\r\n        newFigures.push({x, y, color, id, label});\r\n        setFigures(newFigures);\r\n    }\r\n    \r\n    const undoFigure = () => {\r\n        if (figures.length > 1) {\r\n          let newFigures = figures;\r\n          newFigures.pop();\r\n          setFigures(newFigures);\r\n          const currPoint = newFigures[newFigures.length - 1];\r\n          drawFigure(currPoint.x, currPoint.y, 'red', currentTitleObj)\r\n        }\r\n    }\r\n\r\n    const onClick = (event) => {\r\n        event.preventDefault();\r\n        setNeedSave(true);\r\n    \r\n        const x = event.point.x - event.point.x * 0.25;\r\n        const y = event.point.y - event.point.y * 0.25;\r\n\r\n        addFigure(x, y, 'red', currentTitleObj);\r\n    \r\n    }\r\n\r\n    const onCancel = (event) => {\r\n        event.preventDefault();\r\n        removeElements(props.state.currentCi.properties.Id);\r\n        setSelectedCoords({})\r\n        setFigures([]);\r\n        setNeedSave({});\r\n    }\r\n\r\n    const onSave = (event) => {\r\n\r\n        event.preventDefault();\r\n    \r\n        const updtBody = {\r\n          \"entities\": [\r\n              {\r\n                  \"entity_type\": props.state.srcObj.recType,\r\n                  \"properties\": {\r\n                      \"MapKey_c\": props.state.selectedMap.id,\r\n                      \"MapName_c\": props.state.selectedMap.file_name,\r\n                      \"MapX_c\": selectedCoords.x,\r\n                      \"MapY_c\": selectedCoords.y,\r\n                      \"Id\": props.state.srcObj.id\r\n                  },\r\n                  \"related_properties\": {}\r\n              }\r\n            ],\r\n            \"operation\": \"UPDATE\"\r\n        }\r\n        \r\n        setShowModal(true);\r\n\r\n        let postParams = {\r\n          thost: props.state.cfg.thost,\r\n          tport: props.state.cfg.tport,\r\n          tid: props.state.cfg.tid,\r\n          token: props.state.token,\r\n          body: updtBody\r\n        };\r\n\r\n        postSMAXData(postParams)\r\n        .then(response => {\r\n          console.log(response.data);\r\n          setNeedSave(false);\r\n          setShowModal(false);\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n          }\r\n        )\r\n    }\r\n\r\n    if (svgLink !== null) {\r\n      return (\r\n        <div>\r\n          {renderContent()}\r\n          {renderList()}\r\n          {renderModal()}\r\n        </div>          \r\n      )\r\n    } else return '';\r\n  }\r\n","import React from \"react\";\nimport ReactSVGPanZoom from './viewer'\nimport PropTypes from \"prop-types\";\nimport {TOOL_NONE} from \"./constants\";\n\nexport default class UncontrolledReactSVGPanZoom extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: props.defaultValue || {},\n      tool: props.defaultTool || TOOL_NONE,\n    }\n\n    this.Viewer = null;\n    this.changeTool = this.changeTool.bind(this)\n    this.changeValue = this.changeValue.bind(this)\n  }\n\n  changeTool(tool) {\n    this.setState({tool})\n  }\n\n  changeValue(value) {\n    this.setState({value})\n  }\n\n  pan(SVGDeltaX, SVGDeltaY) {\n    this.Viewer.pan(SVGDeltaX, SVGDeltaY)\n  }\n\n  zoom(SVGPointX, SVGPointY, scaleFactor) {\n    this.Viewer.zoom(SVGPointX, SVGPointY, scaleFactor)\n  }\n\n  fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight) {\n    this.Viewer.fitSelection(selectionSVGPointX, selectionSVGPointY, selectionWidth, selectionHeight)\n  }\n\n  fitToViewer(SVGAlignX, SVGAlignY) {\n    this.Viewer.fitToViewer(SVGAlignX, SVGAlignY)\n  }\n\n  zoomOnViewerCenter(scaleFactor) {\n    this.Viewer.zoomOnViewerCenter(scaleFactor)\n  }\n\n  setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel) {\n    this.Viewer.setPointOnViewerCenter(SVGPointX, SVGPointY, zoomLevel)\n  }\n\n  reset() {\n    this.Viewer.reset()\n  }\n\n  openMiniature() {\n    this.Viewer.openMiniature()\n  }\n\n  closeMiniature() {\n    this.Viewer.closeMiniature()\n  }\n\n  render() {\n    const {width, height, onChangeTool, onChangeValue, ...props} = this.props\n    const {tool, value} = this.state\n\n    return (\n      <ReactSVGPanZoom\n        width={width} height={height}\n        tool={tool} onChangeTool={this.changeTool}\n        value={value} onChangeValue={this.changeValue}\n        ref={Viewer => this.Viewer = Viewer}\n        {...props}\n      />\n    )\n  }\n}\n\nUncontrolledReactSVGPanZoom.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n\n  defaultValue: PropTypes.object,\n  defaultTool: PropTypes.string,\n}\n","import React from 'react';\n// import { NavLink as Link, Switch, Route } from 'react-router-dom';\n// import fetch from 'node-fetch';\n// import axios from 'axios';\n// import https from 'https';\nimport { fetchSMAXData } from '../../utils/commonMethods';\n\n// import child components\nimport { AppHeader } from '../appHeader';\nimport { AppSimpleHeader } from '../appSimpleHeader';\nimport { MapList } from '../mapList';\nimport { SchemaView } from '../schemaView';\nimport { renderSpinner, switchStateField } from '../../utils/commonMethods';\n\n// export entry application component\nexport class App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { \n            cfg: {},\n            token: null,\n            spinner: false,\n            originalUrl: '/',\n            mode: 'unknown',\n            showOtherCIs: false,\n            previousMode: 'unknown',\n            currentCi: {},\n            srcObj: {\n                id: null,\n                recType: null\n            },\n            tgtObj: {\n                id: null,\n                recType: null\n            },\n            fileList: [],\n            originalQuery: {\n                mapKey: null,\n                mapName: null,\n                x: null,\n                y: null\n            },\n            selectedMap: {\n                id: null,\n                file_name: null\n            },\n            tmpSelectedMap: {\n                id: null,\n                file_name: null\n            },\n            selectedPoint: {\n                x: null,\n                y: null\n            },\n            fetchedData: {}\n        };\n\n        this.renderSpinner = renderSpinner.bind(this);\n        this.switchStateField = switchStateField.bind(this);\n    }\n  \n    static fetchData = ( fetchParams ) => {\n        return fetchSMAXData(fetchParams);\n    }\n\n    componentDidMount() {\n        let mode = 'mapselection';\n\n        if (window.initial_state) {\n            //console.log(window.initial_state);\n\n            let selectedMap = null,\n                currentCi = null,\n                mapKey = window.initial_state.requestData.queryCoords.mapKey,\n                currentCiId =  window.initial_state.requestData.srcObj.id;\n\n            if (window.initial_state.token !== null) {\n                if (Object.keys(window.initial_state.fetchedData.ciColocated).length > 0) {\n                    if (window.initial_state.fetchedData.ciColocated.entities.length > 0) {\n                        currentCi = window.initial_state.fetchedData.ciColocated.entities.find(item => item.properties.Id === currentCiId );\n                        if (typeof currentCi === \"object\" && currentCi.properties.id) {\n                            mode = 'mapview';\n                        }\n                    }\n                }\n\n                if (mapKey !== null) {\n                    if (Object.keys(window.initial_state.fetchedData.locationFiles).length > 0) {\n                        if (window.initial_state.fetchedData.locationFiles.length > 0) {\n                            selectedMap = window.initial_state.fetchedData.locationFiles.find(item => item.id === mapKey );\n\n                            if (typeof selectedMap === \"object\" && selectedMap.id) {\n                                mode = 'mapview';\n                            }\n                        } else {\n                            mode = 'error';\n                        }\n                    } else {\n                        mode = 'error';\n                    }\n                }\n            } else {\n                mode = 'error';\n            }\n\n            let stateFields = ['cfg', 'token','srcObj', 'tgtObj', 'queryCoords', 'fetchedData', 'originalUrl', 'mode'];\n            let stateValues = [\n                window.initial_state.cfg,\n                window.initial_state.token,\n                window.initial_state.requestData.srcObj,\n                window.initial_state.requestData.tgtObj,\n                window.initial_state.requestData.queryCoords,\n                window.initial_state.fetchedData,\n                window.initial_state.originalUrl,\n                mode\n            ];\n\n            if (currentCi !== null) {\n                stateFields.push('currentCi');\n                stateValues.push(currentCi);    \n            };\n\n            if (mode === 'mapview') {\n                stateFields.push('selectedMap');\n                stateValues.push({ id: selectedMap.id, file_name: selectedMap.file_name });\n\n                if (window.initial_state.requestData.queryCoords.x !== null && window.initial_state.requestData.queryCoords.y !== null) {\n                    stateFields.push('selectedPoint');\n                    stateValues.push({ x: window.initial_state.requestData.queryCoords.x, y: window.initial_state.requestData.queryCoords.y});    \n                }\n            }\n\n            this.switchStateField(\n                stateFields,\n                stateValues\n            );\n        }\n    }\n    // render view\n    getHeaderText = () => {\n        let msg = 'Data loading...';\n\n        switch (this.state.mode) {\n            case 'unknown':\n                msg = 'The data is being prepared';\n                break;\n            case 'mapview':\n                msg = `View the location file ${this.state.selectedMap.file_name}`;\n                break;\n            case 'mapselection':\n                msg = 'SELECT a map from the list';\n                break;\n            default:\n                msg = 'ERROR';\n                break;\n        }\n\n        return msg;\n    }\n\n    renderContent() {\n        if (this.state.mode === 'mapview') {\n            return (\n                <SchemaView\n                    state={this.state}\n                    switchStateField = {this.switchStateField}\n                />\n            )\n        };\n\n        if (this.state.mode === 'mapselection') {\n            return (\n                <MapList switchStateField = {this.switchStateField} state={this.state} />\n            )\n        };\n\n        return '';\n    }\n    \n    render() {\n        return (\n            <div className='ui container'>\n                <AppSimpleHeader title={this.getHeaderText()} />\n                <AppHeader switchStateField = {this.switchStateField} state={this.state}/>\n                {this.renderContent()}\n                {/* navigation */}\n                {/* <div className='ui-app__navigation'>\n                    <Link\n                        className='ui-app__navigation__link'\n                        activeClassName='ui-app__navigation__link--active'\n                        to={`${this.state.originalUrl}`}\n                        exact={ true }\n                    >{`TOKEN ${this.state.token}`}</Link>\n\n                </div>  */}\n            </div>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\n// import App components\nimport { App } from './components/app';\n\n// compile App component in `#app` HTML element\nReactDOM.hydrate( <BrowserRouter><App /></BrowserRouter>, document.getElementById( 'app' ) );\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\nvar deferredModules = [\n\t[8246,736]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = () => {\n\n};\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = () => {\n\n\t\t}\n\t}\n\treturn result;\n}\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = () => {\n\n\t}\n\tchunkLoadingGlobal = chunkLoadingGlobal.slice();\n\tfor(var i = 0; i < chunkLoadingGlobal.length; i++) webpackJsonpCallback(chunkLoadingGlobal[i]);\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tparentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_ssr\"] = self[\"webpackChunkreact_ssr\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = webpackJsonpCallback;","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}