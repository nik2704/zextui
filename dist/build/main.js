(()=>{var e={8246:(e,t,n)=>{"use strict";var r=n(7294),i=n(3935),o=n(5934),a=n(8),c=n.n(a),l=n(4575),u=n.n(l),s=n(3913),h=n.n(s),d=n(1506),p=n.n(d),f=n(2205),v=n.n(f),m=n(8585),g=n.n(m),y=n(9754),b=n.n(y),w=n(9713),O=n.n(w),V=n(7579),E=n(9669),x=n.n(E),C=n(9267),k=n.n(C);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(){return!0===this.state.spinner?r.createElement("div",{className:"ui center aligned container"},r.createElement(V.Z,{color:"secondary"})):""}function D(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state);e.forEach((function(e,r){n[e]=t[r]})),this.setState(n)}var P=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(){return u()(this,o),i.apply(this,arguments)}return h()(o,[{key:"buttonClick",value:function(e){switch(e){case"edit":this.props.switchStateField(["mode","previousMode"],["mapselection",this.props.state.mode]);break;case"cancel":this.props.switchStateField(["mode","previousMode","selectedMap","tmpSelectedMap"],[this.props.state.previousMode,this.props.state.mode,this.props.state.tmpSelectedMap,{id:null,file_name:null}]);break;case"save":this.props.switchStateField(["mode","tmpSelectedMap"],["mapview",{id:null,file_name:null}])}}},{key:"getButtonClass",value:function(){return null!==this.props.state.tmpSelectedMap.id?"":"disabled"}},{key:"renderButton",value:function(){var e=this;return"mapview"===this.props.state.mode?r.createElement("button",{className:"ui compact icon button",onClick:function(){return e.buttonClick("edit")}},r.createElement("i",{className:"cog icon"})):"mapselection"===this.props.state.mode?r.createElement(r.Fragment,null,r.createElement("button",{className:"ui compact icon button green ".concat(this.getButtonClass()),onClick:function(){return e.buttonClick("save")}},r.createElement("i",{className:"check icon"})),r.createElement("button",{className:"ui compact icon button red ".concat(this.getButtonClass()),onClick:function(){return e.buttonClick("cancel")}},r.createElement("i",{className:"undo icon"}))):""}},{key:"render",value:function(){return r.createElement("div",{className:"ui container"},r.createElement("br",null),this.renderButton(),r.createElement("br",null))}}]),o}(r.Component);var R=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(){return u()(this,o),i.apply(this,arguments)}return h()(o,[{key:"render",value:function(){return r.createElement("h1",{className:"ui header"},this.props.title)}}]),o}(r.Component);var j=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(){return u()(this,o),i.apply(this,arguments)}return h()(o,[{key:"onSelectItem",value:function(e,t){var n={id:e,file_name:t},r=null!==this.props.state.selectedMap.id?this.props.state.selectedMap:n;this.props.switchStateField(["tmpSelectedMap","selectedMap"],[r,n])}},{key:"renderFileList",value:function(){var e=this;if(void 0!==this.props.state.fetchedData.locationFiles){var t=this.props.state.fetchedData.locationFiles;if(t.length>0)return t.map((function(t,n){return r.createElement("div",{className:"item",key:t.id,onClick:function(){return e.onSelectItem(t.id,t.file_name)}},r.createElement("i",{className:t.id===e.props.state.selectedMap.id?"large toggle on middle aligned icon green":"large toggle off middle aligned icon disabled"}),r.createElement("div",{className:"content"},r.createElement("p",{className:"header"},"".concat(n+1,"). ").concat(t.file_name))))}))}return""}},{key:"render",value:function(){return r.createElement("div",{className:"ui relaxed divided list"},this.renderFileList())}}]),o}(r.Component),T=n(3038),_=n.n(T),q=n(5697),F=n.n(q),G=n(2890),A=function(e){var t=e.title;return i.createPortal(r.createElement("div",{className:"ui dimmer modals visible active"},r.createElement("div",{className:"ui standard modal visible active"},r.createElement("div",{className:"header"},t),r.createElement("div",{className:"content"},r.createElement("div",{className:"ui center aligned container"},r.createElement(V.Z,null))))),document.querySelector("#modal"))},X=function(e){var t=(0,r.useState)(!0),n=_()(t,2),i=n[0],o=n[1];return r.createElement("div",null,e.render(r.createElement(G.SvgLoader,{path:e.src,onSVGReady:function(t){o(!1),e.doDraw()}},e.proxy)),!1===i?"":r.createElement(A,{title:"Loading SVG file from SMAX attachment"}))};X.defaultProps={proxy:""},X.propTypes={src:F().string.isRequired,render:F().func.isRequired,proxy:F().node};var N=n(7154),Y=n.n(N),L=n(6479),I=n.n(L);F().string.isRequired;var W=n(227),H="idle",z="panning",B="zooming",U="auto",Z="none",K="pan",Q="zoom-in",J="zoom-out",$="none",ee="top",te="right",ne="bottom",re="left",ie="zoom",oe="pan",ae="center",ce="left",le="right",ue="top",se="bottom",he="cover",de={},pe="tool-edit";function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=H;function ge(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return ye({},ve(ve({},(0,W.yR)()),{},{version:3,mode:me,focus:!1,pinchPointDistance:null,prePinchMode:null,viewerWidth:e,viewerHeight:t,SVGMinX:n,SVGMinY:r,SVGWidth:i,SVGHeight:o,scaleFactorMin:a,scaleFactorMax:c,startX:null,startY:null,endX:null,endY:null,miniatureOpen:!0,lastAction:null}))}function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e=Object.assign({},e,t,{lastAction:n}),Object.freeze(e)}function be(e,t,n){var r=(0,W.CR)(e),i=(0,W.SO)(r);return(0,W.hC)(i,{x:t,y:n})}function we(e){var t=(0,W.CR)(e);return{scaleFactor:t.a,translationX:t.e,translationY:t.f}}function Oe(e,t,n,r,i){return ye(e,{SVGMinX:t,SVGMinY:n,SVGWidth:r,SVGHeight:i})}function Ve(e){return ye(e,{mode:me,startX:null,startY:null,endX:null,endY:null})}var Ee=function(){function e(t,n,r){u()(this,e),this.originalEvent=t,this.value=n,this.SVGViewer=r}return h()(e,[{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"scaleFactor",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.scaleFactor}},{key:"translationX",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.translationX}},{key:"translationY",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.translationY}}]),e}();function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=(0,W.vs)((0,W.CR)(e),(0,W.Iu)(t,n));if(r){var o=(0,W.qU)(i,[{x:e.SVGMinX+r,y:e.SVGMinY+r},{x:e.SVGMinX+e.SVGWidth-r,y:e.SVGMinY+e.SVGHeight-r}]),a=_()(o,2),c=a[0],l=c.x,u=c.y,s=a[1],h=s.x,d=s.y,p=0;e.viewerWidth-l<0?p=e.viewerWidth-l:h<0&&(p=-h);var f=0;e.viewerHeight-u<0?f=e.viewerHeight-u:d<0&&(f=-d),i=(0,W.vs)((0,W.Iu)(p,f),i)}return ye(e,Ce({mode:H},i),oe)}function Me(e,t,n){return ye(e,{mode:z,startX:t,startY:n,endX:t,endY:n},oe)}function Se(e,t,n,r){if(e.mode!==z)throw new Error("update pan not allowed in this mode "+e.mode);var i=be(e,e.endX,e.endY),o=be(e,t,n);return ye(ke(e,o.x-i.x,o.y-i.y,r),{mode:z,endX:t,endY:n},oe)}function De(e){return ye(e,{mode:H,startX:null,startY:null,endX:null,endY:null},oe)}function Pe(e,t,n){var r=0,i=0;return n<=20&&(i=2),e.viewerWidth-t<=20&&(r=-2),e.viewerHeight-n<=20&&(i=-2),t<=20&&(r=2),r/=e.d,i/=e.d,0===r&&0===i?e:ke(e,r,i)}function Re(e,t){return e.x<=t.x&&e.y<=t.y?{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y}:e.x>=t.x&&e.y<=t.y?{x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y}:e.x>=t.x&&e.y>=t.y?{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}:e.x<=t.x&&e.y>=t.y?{x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}:void 0}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t){var n=we(e).scaleFactor,r=e.scaleFactorMin&&n*t<e.scaleFactorMin,i=e.scaleFactorMax&&n*t>e.scaleFactorMax;return r&&t<1||i&&t>1}function qe(e,t){var n=t.a;return null!=e.scaleFactorMin&&(n=Math.max(n,e.scaleFactorMin)),null!=e.scaleFactorMax&&(n=Math.min(n,e.scaleFactorMax)),ye(t,{a:n,d:n})}function Fe(e,t,n,r){if(_e(e,r))return e;var i=(0,W.vs)((0,W.CR)(e),(0,W.Iu)(t,n),(0,W.bA)(r,r),(0,W.Iu)(-t,-n));return ye(e,Te(Te({mode:H},i),{},{startX:null,startY:null,endX:null,endY:null}),ie)}function Ge(e,t,n,r,i){var o=e.viewerWidth/r,a=e.viewerHeight/i,c=Math.min(o,a),l=(0,W.vs)((0,W.bA)(c,c),(0,W.Iu)(-t,-n));return _e(e,c/e.d)?ye(e,{mode:H,startX:null,startY:null,endX:null,endY:null}):ye(e,Te(Te({mode:H},qe(e,l)),{},{startX:null,startY:null,endX:null,endY:null}),ie)}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue,r=e.viewerWidth,i=e.viewerHeight,o=e.SVGMinX,a=e.SVGMinY,c=e.SVGWidth,l=e.SVGHeight,u=r/c,s=i/l,h=Math.min(u,s),d=(0,W.bA)(h,h),p=-o*u,f=-a*s;if(u<s){var v=i-u*l;switch(n){case ue:f=-a*h;break;case ae:f=Math.round(v/2)-a*h;break;case se:f=v-a*h;break;case he:d=(0,W.bA)(s,s);var m=r-s*c;p=o+Math.round(m/2)}}else{var g=r-s*c;switch(t){case ce:p=-o*h;break;case ae:p=Math.round(g/2)-o*h;break;case le:p=g-o*h;break;case he:d=(0,W.bA)(u,u);var y=i-u*l;f=a+Math.round(y/2)}}var b=(0,W.Iu)(p,f),w=(0,W.vs)(b,d);return _e(e,h/e.d)?ye(e,{mode:H,startX:null,startY:null,endX:null,endY:null}):ye(e,Te(Te({mode:H},qe(e,w)),{},{startX:null,startY:null,endX:null,endY:null}),ie)}function Xe(e,t,n){return ye(e,{mode:B,startX:t,startY:n,endX:t,endY:n})}function Ne(e,t,n){if(e.mode!==B)throw new Error("update selection not allowed in this mode "+e.mode);return ye(e,{endX:t,endY:n})}function Ye(e,t,n,r){var i=e.startX,o=e.startY,a=be(e,i,o),c=be(e,t,n);if(Math.abs(i-t)>7&&Math.abs(o-n)>7){var l=Re(a,c);return Ge(e,l.x,l.y,l.width,l.height)}var u=be(e,t,n);return Fe(e,u.x,u.y,r)}function Le(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)}function Ie(e,t){var n=t.getBoundingClientRect(),r=n.left,i=n.top;return{x:e.clientX-Math.round(r),y:e.clientY-Math.round(i)}}function We(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=o||Ie(e,t),c=a.x,l=a.y,u=r;switch(n){case J:var s=be(r,c,l);u=Fe(r,s.x,s.y,1/i.scaleFactor);break;case Q:u=Xe(r,c,l);break;case U:case K:u=Me(r,c,l);break;default:return r}return e.preventDefault(),u}function He(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=o||Ie(e,t),c=a.x,l=a.y,u=0===e.buttons,s=r;switch(n){case Q:r.mode===B&&(s=u?Ye(r,c,l,i.scaleFactor):Ne(r,c,l));break;case U:case K:r.mode===z&&(s=u?De(r):Se(r,c,l,i.preventPanOutside?20:void 0));break;default:return r}return e.preventDefault(),s}function ze(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=o||Ie(e,t),c=a.x,l=a.y,u=r;switch(n){case J:r.mode===B&&(u=Ye(r,c,l,1/i.scaleFactor));break;case Q:r.mode===B&&(u=Ye(r,c,l,i.scaleFactor));break;case U:case K:r.mode===z&&(u=De(r));break;default:return r}return e.preventDefault(),u}var Be=function(e){v()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function i(){return u()(this,i),r.apply(this,arguments)}return h()(i,[{key:"point",get:function(){if(!this._cachePoint){var e=this.originalEvent,t=this.SVGViewer,n=this.value,r=Ie(e,t);this._cachePoint=be(n,r.x,r.y)}return this._cachePoint}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}}]),i}(Ee);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(e){v()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function i(){return u()(this,i),r.apply(this,arguments)}return h()(i,[{key:"points",get:function(){return this._cachePoints||(this._cachePoints=i.touchesToPoints(this.originalEvent.touches,this.SVGViewer,this.value)),this._cachePoints}},{key:"changedPoints",get:function(){return this._cacheChangedPoints||(this._cacheChangedPoints=i.touchesToPoints(this.originalEvent.changedTouches,this.SVGViewer,this.value)),this._cacheChangedPoints}}],[{key:"touchesToPoints",value:function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=t.getBoundingClientRect(),c=be(n,o.clientX-Math.round(a.left),o.clientY-Math.round(a.top));r.push(Ze(Ze({},c),{},{identifier:o.identifier}))}return r}}]),i}(Ee);function Qe(e){return e.split(/[ ,]/).filter(Boolean).map(Number)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e){return"number"==typeof e.pinchPointDistance}function tt(e,t){return t.detectPinchGesture&&e.touches.length>1}function nt(e,t,n,r,i,o){var a=0===e.touches.length?ye(r,{mode:r.prePinchMode?H:r.mode,prePinchMode:null}):r,c=function(e,t){var n=t.getBoundingClientRect(),r=n.left,i=n.top;return{x:e.clientX-Math.round(r),y:e.clientY-Math.round(i)}}(e.touches.length>0?e.touches[0]:e.changedTouches[0],t);switch(n){case J:case Q:case U:case K:return e.stopPropagation(),e.preventDefault(),o(e,t,n,a,i,c);default:return a}}function rt(e,t,n,r,i){var o=t.getBoundingClientRect(),a=o.left,c=o.top,l=e.touches[0].clientX-Math.round(a),u=e.touches[0].clientY-Math.round(c),s=e.touches[1].clientX-Math.round(a),h=e.touches[1].clientY-Math.round(c),d=Math.sqrt(Math.pow(s-l,2)+Math.pow(h-u,2)),p=et(r)?r.pinchPointDistance:d,f=be(r,(l+s)/2,(u+h)/2),v=d/p;if(_e(r,v))return r;e.cancelable&&e.preventDefault();var m=(0,W.vs)((0,W.CR)(r),(0,W.Iu)(f.x,f.y),(0,W.bA)(v,v),(0,W.Iu)(-f.x,-f.y));return ye(r,ye($e($e({mode:B},qe(r,m)),{},{startX:null,startY:null,endX:null,endY:null,prePinchMode:r.prePinchMode?r.prePinchMode:r.mode,pinchPointDistance:d})))}function it(e){return ye(e,{miniatureOpen:!0})}function ot(e){return ye(e,{miniatureOpen:!1})}var at=function(){return navigator.userAgent.toLowerCase()};function ct(e){return function(e){return["zoom-in","zoom-out","grab","grabbing"].indexOf(e)>-1}(e)?at().indexOf("firefox")>-1?"-moz-".concat(e):at().indexOf("webkit")>-1?"-webkit-".concat(e):void 0:e}var lt=1;function ut(e){var t=function(t){v()(a,t);var n,i,o=(n=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b()(n);if(i){var r=b()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g()(this,e)});function a(e){var t;return u()(this,a),(t=o.call(this,e)).state={uid:"uid".concat(lt++)},t}return h()(a,[{key:"render",value:function(){return r.createElement(e,Y()({_uid:this.state.uid},this.props))}}]),a}(r.Component);return t.displayName="RandomUID(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),t}var st="react-svg-pan-zoom_border_gradient";function ht(e){var t,n=e.direction,i=e.width,o=e.height,a=e._uid;switch(n){case ee:t="translate(".concat(i,", 0) rotate(90)");break;case te:t="translate(".concat(i,", ").concat(o,") rotate(180)");break;case ne:t="translate(0, ".concat(o,") rotate(270)");break;default:t=" "}var c="".concat(st,"_gradient_").concat(a),l="".concat(st,"_mask_").concat(a);return r.createElement("g",null,r.createElement("defs",null,r.createElement("linearGradient",{id:c,x1:"0%",y1:"0%",x2:"100%",y2:"0%",spreadMethod:"pad"},r.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"0.8"}),r.createElement("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.5"})),r.createElement("mask",{id:l,x:"0",y:"0",width:"20",height:Math.max(i,o)},r.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(i,o),style:{stroke:"none",fill:"url(#".concat(c,")")}}))),r.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(i,o),style:{stroke:"none",fill:"#000",mask:"url(#".concat(l,")")},transform:t}))}ht.propTypes={direction:F().oneOf([ee,te,ne,re]).isRequired,width:F().number.isRequired,height:F().number.isRequired};const dt=ut(ht);function pt(e){var t=e.startX,n=e.startY,i=e.endX,o=e.endY;if(!(t&&n&&i&&o))return null;var a=Re({x:t,y:n},{x:i,y:o});return r.createElement("rect",{stroke:"#969FFF",strokeOpacity:.7,fill:"#F3F4FF",fillOpacity:.7,x:a.x,y:a.y,width:a.width,height:a.height,style:{pointerEvents:"none"}})}function ft(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"}))}function vt(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}function mt(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("g",null,r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}function gt(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}function yt(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}))}pt.propTypes={startX:F().number,startY:F().number,endX:F().number,endY:F().number};var bt=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(e){var t;return u()(this,o),(t=i.call(this,e)).state={hover:!1},t}return h()(o,[{key:"change",value:function(e){switch(e.preventDefault(),e.stopPropagation(),e.type){case"mouseenter":case"touchstart":this.setState({hover:!0});break;case"mouseleave":case"touchend":case"touchcancel":this.setState({hover:!1})}}},{key:"render",value:function(){var e=this,t={display:"block",width:"24px",height:"24px",margin:[ee,ne].indexOf(this.props.toolbarPosition)>=0?"2px 1px":"1px 2px",color:this.props.active||this.state.hover?this.props.activeColor:"#FFF",transition:"color 200ms ease",background:"none",padding:"0px",border:"0px",outline:"0px",cursor:"pointer"};return r.createElement("button",{onMouseEnter:function(t){return e.change(t)},onMouseLeave:function(t){return e.change(t)},onTouchStart:function(t){e.change(t),e.props.onClick(t)},onTouchEnd:function(t){return e.change(t)},onTouchCancel:function(t){return e.change(t)},onClick:this.props.onClick,style:t,title:this.props.title,name:this.props.name,type:"button"},this.props.children)}}]),o}(r.Component);function wt(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor",viewBox:"0 0 24 24"},r.createElement("path",{d:"M12.012986958026886,16.46753191947937 c-3.1962481141090393,0 -5.753246605396271,-2.412698268890381 -5.753246605396271,-5.428571105003357 s2.5569984912872314,-5.428571105003357 5.753246605396271,-5.428571105003357 s5.753246605396271,2.412698268890381 5.753246605396271,5.428571105003357 s-2.5569984912872314,5.428571105003357 -5.753246605396271,5.428571105003357 zm0,-9.650793075561523 c-2.4930735290050507,0 -4.474747359752655,1.8698411583900456 -4.474747359752655,4.2222219705581665 s1.9816738307476045,4.2222219705581665 4.474747359752655,4.2222219705581665 s4.474747359752655,-1.8698411583900456 4.474747359752655,-4.2222219705581665 s-1.9816738307476045,-4.2222219705581665 -4.474747359752655,-4.2222219705581665 z"}),r.createElement("path",{d:"M13.765516988263187,20.623376583271238 h-2.9019701647437373 l-0.8061028235399266,-2.3204374471772096 c-0.5374018823599518,-0.15133287698981818 -1.0748037647199027,-0.3531100463095763 -1.558465458843859,-0.6053315079592726 l-2.364568282383786,1.1097744312586657 l-2.042127152967815,-1.916883108537695 l1.182284141191893,-2.2195488625173314 c-0.2687009411799768,-0.453998630969456 -0.4836616941239568,-0.9584415542688497 -0.644882258831943,-1.4628844775682421 L2.103896141052246,12.400956933491123 v-2.723991785816725 l2.472048658855776,-0.7566643849490907 c0.16122056470798574,-0.5044429232993939 0.3761813176519669,-1.0088858465987869 0.644882258831943,-1.4628844775682421 l-1.182284141191893,-2.2195488625173314 l2.042127152967815,-1.916883108537695 l2.364568282383786,1.1097744312586657 c0.4836616941239568,-0.2522214616496981 1.0210635764839076,-0.453998630969456 1.558465458843859,-0.6053315079592726 L10.863546823519453,1.454545497894287 h2.9019701647437373 l0.8061028235399266,2.3204374471772096 c0.5374018823599518,0.15133287698981818 1.0748037647199027,0.3531100463095763 1.558465458843859,0.6053315079592726 l2.364568282383786,-1.1097744312586657 l2.042127152967815,1.916883108537695 l-1.182284141191893,2.2195488625173314 c0.2687009411799768,0.453998630969456 0.4836616941239568,0.9584415542688497 0.644882258831943,1.4628844775682421 l2.472048658855776,0.7566643849490907 v2.723991785816725 l-2.472048658855776,0.7566643849490907 c-0.16122056470798574,0.5044429232993939 -0.3761813176519669,1.0088858465987869 -0.644882258831943,1.4628844775682421 l1.182284141191893,2.2195488625173314 l-2.042127152967815,1.916883108537695 l-2.364568282383786,-1.1097744312586657 c-0.4836616941239568,0.2522214616496981 -1.0210635764839076,0.453998630969456 -1.558465458843859,0.6053315079592726 L13.765516988263187,20.623376583271238 zm-2.1496075294398054,-1.0088858465987869 h1.3972448941358735 l0.7523626353039319,-2.169104570187392 l0.2687009411799768,-0.05044429232993939 c0.644882258831943,-0.15133287698981818 1.236024329427888,-0.4035543386395148 1.8271664000238343,-0.7062200926191539 l0.2687009411799768,-0.15133287698981818 l2.1496075294398054,1.0088858465987869 l0.9673233882479106,-0.9079972619389083 l-1.0748037647199027,-2.0177716931975738 l0.16122056470798574,-0.2522214616496981 c0.3224411294159713,-0.5044429232993939 0.5911420705959466,-1.1097744312586657 0.7523626353039319,-1.7151059392179375 l0.05374018823599563,-0.2522214616496981 l2.310828094147793,-0.7062200926191539 v-1.3115516005784231 l-2.310828094147793,-0.7062200926191539 l-0.05374018823599563,-0.2522214616496981 c-0.16122056470798574,-0.6053315079592726 -0.42992150588796313,-1.1602187235886048 -0.7523626353039319,-1.7151059392179375 l-0.16122056470798574,-0.2522214616496981 l1.0748037647199027,-2.0177716931975738 l-0.9673233882479106,-0.9079972619389083 l-2.1496075294398054,1.0088858465987869 l-0.2687009411799768,-0.15133287698981818 c-0.5911420705959466,-0.3026657539796375 -1.182284141191893,-0.5548872156293336 -1.8271664000238343,-0.7062200926191539 l-0.2687009411799768,-0.05044429232993939 L13.013154352959262,2.463431344493074 h-1.3972448941358735 l-0.7523626353039319,2.169104570187392 l-0.2687009411799768,0.05044429232993939 c-0.644882258831943,0.15133287698981818 -1.236024329427888,0.4035543386395148 -1.8271664000238343,0.7062200926191539 l-0.2687009411799768,0.15133287698981818 l-2.1496075294398054,-1.0088858465987869 l-0.9673233882479106,0.9079972619389083 l1.0748037647199027,2.0177716931975738 l-0.16122056470798574,0.2522214616496981 c-0.3224411294159713,0.5044429232993939 -0.5911420705959466,1.1097744312586657 -0.7523626353039319,1.7151059392179375 l-0.05374018823599563,0.2522214616496981 L3.1786999057721497,10.383185240293553 v1.3115516005784231 l2.310828094147793,0.7062200926191539 l0.05374018823599563,0.2522214616496981 c0.16122056470798574,0.6053315079592726 0.42992150588796313,1.1602187235886048 0.7523626353039319,1.7151059392179375 l0.16122056470798574,0.2522214616496981 l-1.0748037647199027,2.0177716931975738 l0.9673233882479106,0.9079972619389083 l2.1496075294398054,-1.0088858465987869 l0.2687009411799768,0.15133287698981818 c0.5911420705959466,0.3026657539796375 1.182284141191893,0.5548872156293336 1.8271664000238343,0.7062200926191539 l0.2687009411799768,0.05044429232993939 l0.7523626353039319,2.169104570187392 z"}))}function Ot(){return r.createElement("svg",{width:24,height:24,stroke:"currentColor",viewBox:"0 0 24 24"},r.createElement("g",null,r.createElement("path",{d:"M20.32336818915877,8.934695483669262 c-0.45280542425968157,-1.0139506476774387 -1.0616820496274741,-1.8886190624719208 -1.8263178117172614,-2.6239302202881682 C17.73225858315866,5.5754165935172075 16.82274692981281,4.990003578065706 15.768320377162611,4.554376168836033 C14.714010848657217,4.1187487596063574 13.607898632055951,3.901103859205895 12.449593646876167,3.901103859205895 c-1.0913671743571105,0 -2.147471073082695,0.19795107539007975 -3.168506736418078,0.594303370741903 C8.260285295412295,4.891684501204345 7.352607020334888,5.450351426689366 6.558130101322407,6.171558054593415 l-1.4479787515953941,-1.381756274776118 c-0.22277496364119945,-0.22135859311670641 -0.478823792452411,-0.27128712852398223 -0.7684975588680196,-0.15001067850766164 C4.044607503321307,4.7613301356594295 3.896103863576596,4.972035307246708 3.896103863576596,5.271869104023837 v4.7980534773391845 c0,0.1856096117169062 0.07056555931131672,0.34627371175399485 0.21165766988568482,0.48191727601598516 c0.14117012667089787,0.13568107630963017 0.3082415973897318,0.20354037048826493 0.5012534202047635,0.20354037048826493 h4.9894024294265105 c0.31190835392663807,0 0.5308995368861366,-0.1428083653610069 0.6571295810715526,-0.4284250960830208 c0.126152028088887,-0.2784519296229983 0.07423231584822312,-0.5247185223718857 -0.15599318501158424,-0.7390248505324938 l-1.525799807883994,-1.4778996528744255 c0.5198992672754171,-0.471263854486558 1.1137968021094637,-0.8335927226299688 1.7820046688882636,-1.0870991405731476 c0.6682468748270668,-0.253468905895542 1.3661008582872387,-0.3802971389624078 2.093756990621842,-0.3802971389624078 c0.7720862993083958,0 1.5091043632265895,0.14472147979058692 2.210742127368464,0.43375180684773307 c0.7017547882866685,0.2892178872953419 1.3084859709998908,0.6801309357395356 1.8208566849601673,1.1728141694278627 c0.5123317059120108,0.4925706975454124 0.9188345768811836,1.0762206467578874 1.2195866290040414,1.7510248717327115 c0.30047899578500536,0.6747292008795484 0.450933037942962,1.3832567566816705 0.450933037942962,2.1259577878827662 c0,0.7426635191534576 -0.1504150341096948,1.4511910749555836 -0.450933037942962,2.125882763787488 c-0.3007520521228583,0.6747292008795484 -0.7072549230920285,1.2583041259967453 -1.2195866290040414,1.7510248717327115 c-0.5123707139602777,0.49268323368832717 -1.1193359449630875,0.883708818275442 -1.8208566849601673,1.1728141694278627 c-0.7016377641418746,0.28910535115242436 -1.438655828060069,0.43367678275245714 -2.210742127368464,0.43367678275245714 c-0.883571301249657,0 -1.7188506387472908,-0.18564712376454495 -2.505916028589432,-0.5567913231030823 c-0.7869483656973462,-0.3711441993385343 -1.451450467890976,-0.8959002337580587 -1.9934672985326243,-1.5744931755444003 c-0.0519197122406649,-0.07134791460904488 -0.13734733794093235,-0.11426169710786092 -0.25616585295600625,-0.1286288113535305 c-0.11140698584473192,0 -0.20424614071534258,0.03207280073119566 -0.278478456563565,0.09625591424122544 l-1.5257607998357288,1.478049701064982 c-0.05933124141100766,0.05739343288740224 -0.090888752457362,0.13046690168783392 -0.09463352509079853,0.21955801483004306 c-0.003666756536906468,0.089466233618598 0.02055724143563507,0.1697045035180446 0.07247695367630005,0.24108993017472888 c0.8093779934496996,0.9424901969254776 1.7893381819620773,1.6725496680722887 2.9401536218749906,2.190028365249879 c1.1508154399129125,0.5175912333205096 2.3648629260633283,0.7765368981713148 3.6418694021133957,0.7765368981713148 c1.1583049851797858,0 2.2644172017810518,-0.21786997268629618 3.3187267302864476,-0.653309821677778 c1.0544265526501913,-0.4354023369438428 1.9636651496581936,-1.0210779367288156 2.7285739680858354,-1.7563515824974236 c0.7647527862345854,-0.7355737421497196 1.373512387457582,-1.6100545967060076 1.826434835862056,-2.6239302202881682 s0.6791691283412559,-2.0778673428097925 0.6791691283412559,-3.191525013111227 C21.00253731750002,11.012037657812112 20.77613460537019,9.948608619299062 20.32336818915877,8.934695483669262 z"})))}function Vt(e){var t=e.tool,n=e.value,i=e.onChangeValue,o=e.onChangeTool,a=e.activeToolColor,c=e.position,l=e.SVGAlignX,u=e.SVGAlignY,s=e.undo,h=function(e,t){o(t),e.stopPropagation(),e.preventDefault()},d=[ee,ne].indexOf(c)>=0,p={position:"absolute",transform:[ee,ne].indexOf(c)>=0?"translate(-50%, 0px)":"none",top:[re,te,ee].indexOf(c)>=0?"5px":"unset",left:[ee,ne].indexOf(c)>=0?"50%":re===c?"5px":"unset",right:[te].indexOf(c)>=0?"5px":"unset",bottom:[ne].indexOf(c)>=0?"5px":"unset",backgroundColor:"rgba(19, 20, 22, 0.90)",borderRadius:"2px",display:"flex",flexDirection:d?"row":"column",padding:d?"1px 2px":"2px 1px"};return r.createElement("div",{style:p,role:"toolbar"},r.createElement(bt,{toolbarPosition:c,active:t===Z,activeColor:a,name:"unselect-tools",title:"Selection",onClick:function(e){return h(e,Z)}},r.createElement(ft,null)),r.createElement(bt,{toolbarPosition:c,active:t===K,activeColor:a,name:"select-tool-pan",title:"Pan",onClick:function(e){return h(e,K)}},r.createElement(vt,null)),r.createElement(bt,{toolbarPosition:c,active:t===Q,activeColor:a,name:"select-tool-zoom-in",title:"Zoom in",onClick:function(e){return h(e,Q)}},r.createElement(mt,null)),r.createElement(bt,{toolbarPosition:c,active:t===J,activeColor:a,name:"select-tool-zoom-out",title:"Zoom out",onClick:function(e){return h(e,J)}},r.createElement(gt,null)),r.createElement(bt,{toolbarPosition:c,active:!1,activeColor:a,name:"fit-to-viewer",title:"Fit to viewer",onClick:function(e){return function(e){i(Ae(n,l,u)),e.stopPropagation(),e.preventDefault()}(e)}},r.createElement(yt,null)),r.createElement(bt,{toolbarPosition:c,active:t===pe,activeColor:a,name:"edit-mode",title:"Edit Mode",onClick:function(e){return h(e,pe)}},r.createElement(wt,null)),r.createElement(bt,{toolbarPosition:c,active:"tool-undo"===t,activeColor:a,name:"undo-mode",title:"Undo Mode",onClick:function(e){return function(e){s(),e.stopPropagation(),e.preventDefault()}(e)}},r.createElement(Ot,null)))}function Et(e){var t=e.open,n=0;switch(e.position){case re:n=t?"rotate(225, 12, 13)":"rotate(45, 12, 13)";break;case te:n=n=t?"rotate(135, 12, 13)":"rotate(-45, 12, 13)"}return r.createElement("svg",{width:24,height:24,stroke:"currentColor"},r.createElement("g",{transform:n},r.createElement("path",{fill:"#000000",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})))}function xt(e){var t,n=e.value,i=e.onChangeValue,o=e.position,a=(t={width:"24px",height:"24px",display:"block",position:"absolute",bottom:0},O()(t,o===re?"left":"right","0px"),O()(t,"background","rgba(19, 20, 22, 0.901961)"),O()(t,"border",0),O()(t,"padding",0),O()(t,"outline",0),O()(t,"color","#fff"),t),c=n.miniatureOpen?ot:it;return r.createElement("button",{type:"button",style:a,onClick:function(){return i(c(n))}},r.createElement(Et,{open:n.miniatureOpen,position:o}))}function Ct(e){var t=e.SVGMinX,n=e.SVGMinY,i=e.SVGWidth,o=e.SVGHeight,a=e.x1,c=e.y1,l=e.x2,u=e.y2,s=(e.zoomToFit,e._uid),h="".concat("react-svg-pan-zoom_miniature","_mask_").concat(s);return r.createElement("g",null,r.createElement("defs",null,r.createElement("mask",{id:h},r.createElement("rect",{x:t,y:n,width:i,height:o,fill:"#ffffff"}),r.createElement("rect",{x:a,y:c,width:l-a,height:u-c}))),r.createElement("rect",{x:t,y:n,width:i,height:o,style:{stroke:"none",fill:"#000",mask:"url(#".concat(h,")"),opacity:.4}}))}bt.propTypes={title:F().string.isRequired,name:F().string.isRequired,toolbarPosition:F().string.isRequired,activeColor:F().string.isRequired,onClick:F().func.isRequired,active:F().bool.isRequired},Vt.propTypes={tool:F().string.isRequired,onChangeTool:F().func.isRequired,value:F().object.isRequired,onChangeValue:F().func.isRequired,position:F().oneOf([ee,te,ne,re]),SVGAlignX:F().oneOf([ae,ce,le]),SVGAlignY:F().oneOf([ae,ue,se]),activeToolColor:F().string},Vt.defaultProps={position:te,SVGAlignX:ce,SVGAlignY:ue,activeToolColor:"#1CA6FC"},Et.propTypes={open:F().bool.isRequired,position:F().oneOf([te,re]).isRequired},xt.propTypes={value:F().object.isRequired,onChangeValue:F().func.isRequired,position:F().oneOf([te,re]).isRequired},Ct.propTypes={SVGWidth:F().number.isRequired,SVGHeight:F().number.isRequired,SVGMinX:F().number.isRequired,SVGMinY:F().number.isRequired,x1:F().number.isRequired,y1:F().number.isRequired,x2:F().number.isRequired,y2:F().number.isRequired,zoomToFit:F().number.isRequired};const kt=ut(Ct);function Mt(e){var t,n,i,o=e.value,a=e.onChangeValue,c=e.children,l=e.position,u=e.background,s=e.SVGBackground,h=e.width,d=e.height,p=o.SVGMinX,f=o.SVGMinY,v=o.SVGWidth,m=o.SVGHeight,g=o.viewerWidth,y=o.viewerHeight,b=m/v,w=b>=1?d/m:h/v,V=(0,W.qU)((0,W.SO)(o),[{x:0,y:0},{x:g,y}]),E=_()(V,2),x=E[0],C=x.x,k=x.y,M=E[1],S=M.x,D=M.y;o.miniatureOpen?(n=h,i=d):(n=24,i=24);var P=(t={position:"absolute",overflow:"hidden",outline:"1px solid rgba(19, 20, 22, 0.90)",transition:"width 200ms ease, height 200ms ease, bottom 200ms ease",width:n+"px",height:i+"px",bottom:"6px"},O()(t,l===re?"left":"right","6px"),O()(t,"background",u),t),R=b>=1?"translate(".concat((h-v*w)/2-p*w,", ").concat(-f*w,")"):"translate(".concat(-p*w,", ").concat((d-m*w)/2-f*w,")");return r.createElement("div",{role:"navigation",style:P},r.createElement("svg",{width:h,height:d,style:{pointerEvents:"none"}},r.createElement("g",{transform:R},r.createElement("g",{transform:"scale(".concat(w,", ").concat(w,")")},r.createElement("rect",{fill:s,x:p,y:f,width:v,height:m}),c,r.createElement(kt,{SVGWidth:v,SVGHeight:m,SVGMinX:p,SVGMinY:f,x1:C,y1:k,x2:S,y2:D,zoomToFit:w})))),r.createElement(xt,{value:o,onChangeValue:a,position:l}))}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Mt.propTypes={value:F().object.isRequired,onChangeValue:F().func.isRequired,SVGBackground:F().string.isRequired,position:F().oneOf([te,re]),background:F().string.isRequired,width:F().number.isRequired,height:F().number.isRequired},Mt.defaultProps={position:re,background:"#616264",width:100,height:80};var Pt=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(e,t){var n;u()(this,o);var r,a=e.width,c=e.height,l=e.scaleFactorMin,s=e.scaleFactorMax,h=e.children,d=h.props.viewBox;if(d){var f=Qe(d),v=_()(f,4);r=ge(a,c,v[0],v[1],v[2],v[3],l,s)}else{var m=h.props;r=ge(a,c,0,0,m.width,m.height,l,s)}return(n=i.call(this,e,t)).ViewerDOM=null,n.state={pointerX:null,pointerY:null,defaultValue:r},n.autoPanLoop=n.autoPanLoop.bind(p()(n)),n.onWheel=n.onWheel.bind(p()(n)),n}return h()(o,[{key:"componentDidUpdate",value:function(e){var t=this.getValue(),n=this.props,r=t,i=!1,o=n.children.props.viewBox;if(o){var a=Qe(o),c=_()(a,4),l=c[0],u=c[1],s=c[2],h=c[3];t.SVGMinX===l&&t.SVGMinY===u&&t.SVGWidth===s&&t.SVGHeight===h||(r=Oe(r,l,u,s,h),i=!0)}else{var d=n.children.props,p=d.width,f=d.height;t.SVGWidth===p&&t.SVGHeight===f||(r=Oe(r,0,0,p,f),i=!0)}e.width===n.width&&e.height===n.height||(r=function(e,t,n){return ye(e,{viewerWidth:t,viewerHeight:n})}(r,n.width,n.height),i=!0),e.scaleFactorMin===n.scaleFactorMin&&e.scaleFactorMax===n.scaleFactorMax||(r=function(e,t,n){return ye(e,{scaleFactorMin:t,scaleFactorMax:n})}(r,n.scaleFactorMin,n.scaleFactorMax),i=!0),i&&this.setValue(r)}},{key:"componentDidMount",value:function(){this.autoPanIsRunning=!0,requestAnimationFrame(this.autoPanLoop),this.ViewerDOM.addEventListener("wheel",this.onWheel,!1)}},{key:"componentWillUnmount",value:function(){this.autoPanIsRunning=!1,this.ViewerDOM.removeEventListener("wheel",this.onWheel)}},{key:"getValue",value:function(){return null!==(e=this.props.value)&&"object"===c()(e)&&e.hasOwnProperty("version")&&3===e.version?this.props.value:this.state.defaultValue;var e}},{key:"getTool",value:function(){return this.props.tool?this.props.tool:Z}},{key:"setValue",value:function(e){var t=this.props,n=t.onChangeValue,r=t.onZoom,i=t.onPan;n&&n(e),e.lastAction&&(r&&e.lastAction===ie&&r(e),i&&e.lastAction===oe&&i(e))}},{key:"pan",value:function(e,t){var n=ke(this.getValue(),e,t);this.setValue(n)}},{key:"zoom",value:function(e,t,n){var r=Fe(this.getValue(),e,t,n);this.setValue(r)}},{key:"fitSelection",value:function(e,t,n,r){var i=Ge(this.getValue(),e,t,n,r);this.setValue(i)}},{key:"fitToViewer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,n=Ae(this.getValue(),e,t);this.setValue(n)}},{key:"zoomOnViewerCenter",value:function(e){var t=function(e,t){var n=be(e,e.viewerWidth/2,e.viewerHeight/2);return Fe(e,n.x,n.y,t)}(this.getValue(),e);this.setValue(t)}},{key:"setPointOnViewerCenter",value:function(e,t,n){var r=function(e,t,n,r){var i=e.viewerWidth,o=e.viewerHeight,a=(0,W.vs)((0,W.Iu)(i/2-t,o/2-n),(0,W.Iu)(t,n),(0,W.bA)(r,r),(0,W.Iu)(-t,-n));return ye(e,ve({mode:H},a))}(this.getValue(),e,t,n);this.setValue(r)}},{key:"reset",value:function(){var e=ye(this.getValue(),ve({mode:H},(0,W.yR)()));this.setValue(e)}},{key:"openMiniature",value:function(){var e=it(this.getValue());this.setValue(e)}},{key:"closeMiniature",value:function(){var e=ot(this.getValue());this.setValue(e)}},{key:"handleViewerEvent",value:function(e){var t=this.props,n=this.ViewerDOM;if([pe].indexOf(this.getTool())>=0&&e.target!==n){var r={click:t.onClick,dblclick:t.onDoubleClick,mousemove:t.onMouseMove,mouseup:t.onMouseUp,mousedown:t.onMouseDown,touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd,touchcancel:t.onTouchCancel}[e.type];r&&r(function(e,t,n){var r=e.type;switch(r){case"mousemove":case"mouseup":case"mousedown":case"click":case"dblclick":return new Be(e,t,n);case"touchstart":case"touchmove":case"touchend":case"touchcancel":return new Ke(e,t,n);default:throw new Error("".concat(r," not supported"))}}(e,t.value,n))}}},{key:"autoPanLoop",value:function(){var e={x:this.state.pointerX,y:this.state.pointerY},t=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=o.x,c=o.y;return[Z,U].indexOf(n)>=0&&i.detectAutoPan&&r.focus?Pe(r,a,c):r}(null,this.ViewerDOM,this.getTool(),this.getValue(),this.props,e);this.getValue()!==t&&this.setValue(t),this.autoPanIsRunning&&requestAnimationFrame(this.autoPanLoop)}},{key:"onWheel",value:function(e){var t=function(e,t,n,r,i){var o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||Ie(e,t),a=o.x,c=o.y;if(!i.detectWheel)return r;var l=Le(Math.max(-1,Math.min(1,e.deltaY)),-1,1,i.scaleFactorOnWheel,1/i.scaleFactorOnWheel),u=be(r,a,c),s=Fe(r,u.x,u.y,l);return e.preventDefault(),s}(e,this.ViewerDOM,this.getTool(),this.getValue(),this.props);this.getValue()!==t&&this.setValue(t)}},{key:"render",value:function(){var e,t=this,n=this.props,i=this.state,o=i.pointerX,a=i.pointerY,c=this.getTool(),l=this.getValue(),u=n.customToolbar,s=void 0===u?Vt:u,h=n.customMiniature,d=void 0===h?Mt:h,p=c===U&&l.mode===z&&l.startX!==l.endX&&l.startY!==l.endY;c===K&&(e=ct(l.mode===z?"grabbing":"grab")),c===Q&&(e=ct("zoom-in")),c===J&&(e=ct("zoom-out")),p&&(e=ct("grabbing")),c===pe&&(e=ct("pointer"));var f=[K,Q,J].indexOf(c)>=0;f=f||p;var v={display:"block",cursor:e,touchAction:this.props.detectPinchGesture||-1!==[K,U].indexOf(this.getTool())?"none":void 0};return r.createElement("div",{style:Dt({position:"relative",width:l.viewerWidth,height:l.viewerHeight},n.style),className:this.props.className},r.createElement("svg",{ref:function(e){return t.ViewerDOM=e},width:l.viewerWidth,height:l.viewerHeight,style:v,onMouseDown:function(e){var n=We(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onMouseMove:function(e){var n=t.ViewerDOM.getBoundingClientRect(),r=n.left,i=n.top,o=e.clientX-Math.round(r),a=e.clientY-Math.round(i),c=He(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props,{x:o,y:a});t.getValue()!==c&&t.setValue(c),t.setState({pointerX:o,pointerY:a}),t.handleViewerEvent(e)},onMouseUp:function(e){var n=ze(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onClick:function(e){t.handleViewerEvent(e)},onDoubleClick:function(e){var n=function(e,t,n,r,i){var o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||Ie(e,t),a=o.x,c=o.y,l=r;if(n===U&&!i.disableDoubleClickZoomWithToolAuto){var u=i.modifierKeys,s=void 0===u?[]:u,h=be(r,a,c),d=function(t,n){return t||e.getModifierState(n)},p=s.reduce(d,!1)?1/i.scaleFactor:i.scaleFactor;l=Fe(r,h.x,h.y,p)}return e.preventDefault(),l}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onMouseEnter:function(e){},onMouseLeave:function(e){var n=function(e,t,n,r,i){var o=function(e,t){return ye(e,{focus:t})}(r,"mouseenter"===e.type);return e.preventDefault(),o}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n)},onTouchStart:function(e){var n=function(e,t,n,r,i){if(tt(e,i))return rt(e,t,0,r);if(1!==e.touches.length){if([z,B].indexOf(r.mode)>=0)return Ve(r);if([H].indexOf(r.mode)>=0)return r}return nt(e,t,n,r,i,We)}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onTouchMove:function(e){var n=function(e,t,n,r,i){return tt(e,i)?rt(e,t,0,r):[z,B].indexOf(r.mode)>=0?nt(e,t,n,r,i,He):r}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onTouchEnd:function(e){var n=function(e,t,n,r,i){if(!([z,B].indexOf(r.mode)>=0))return r;var o=function(e,t,n){return n.detectPinchGesture&&et(t)&&e.touches.length<2}(e,r,i)?ye(r,{pinchPointDistance:null}):r;return e.touches.length>0?o:nt(e,t,n,o,i,ze)}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)},onTouchCancel:function(e){var n=function(e,t,n,r,i){return e.stopPropagation(),e.preventDefault(),Ve(r)}(e,t.ViewerDOM,t.getTool(),t.getValue(),t.props);t.getValue()!==n&&t.setValue(n),t.handleViewerEvent(e)}},r.createElement("rect",{fill:n.background,x:0,y:0,width:l.viewerWidth,height:l.viewerHeight,style:{pointerEvents:"none"}}),r.createElement("g",{transform:(0,W.uv)(l),style:f?{pointerEvents:"none"}:{}},r.createElement("rect",{fill:this.props.SVGBackground,style:this.props.SVGStyle,x:l.SVGMinX||0,y:l.SVGMinY||0,width:l.SVGWidth,height:l.SVGHeight}),r.createElement("g",null,n.children.props.children)),[Z,U].indexOf(c)>=0&&n.detectAutoPan&&l.focus?r.createElement("g",{style:{pointerEvents:"none"}},a<=20?r.createElement(dt,{direction:ee,width:l.viewerWidth,height:l.viewerHeight}):null,l.viewerWidth-o<=20?r.createElement(dt,{direction:te,width:l.viewerWidth,height:l.viewerHeight}):null,l.viewerHeight-a<=20?r.createElement(dt,{direction:ne,width:l.viewerWidth,height:l.viewerHeight}):null,l.focus&&o<=20?r.createElement(dt,{direction:re,width:l.viewerWidth,height:l.viewerHeight}):null):null,l.mode!==B?null:r.createElement(pt,{startX:l.startX,startY:l.startY,endX:l.endX,endY:l.endY})),n.toolbarProps.position===$?null:r.createElement(s,Y()({},this.props.toolbarProps,{value:l,onChangeValue:function(e){return t.setValue(e)},tool:c,onChangeTool:function(e){return t.props.onChangeTool(e)},undo:this.props.undo})),n.miniatureProps.position===$?null:r.createElement(d,Y()({},this.props.miniatureProps,{value:l,onChangeValue:function(e){return t.setValue(e)},SVGBackground:this.props.SVGBackground}),n.children.props.children))}}]),o}(r.Component);function Rt(e){var t=function(e){return void 0!==e.OwnedByPerson?e.OwnedByPerson.Name:"OWNER NOT SELECTED"},n=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useState)(Z),a=_()(o,2),c=a[0],l=a[1],u=(0,r.useState)(de),s=_()(u,2),h=s[0],d=s[1],p=(0,r.useState)(null),f=_()(p,2),v=f[0],m=f[1],g=(0,r.useState)(!1),y=_()(g,2),b=y[0],w=y[1],O=(0,r.useState)(!1),V=_()(O,2),E=V[0],C=V[1],k=(0,r.useState)({}),M=_()(k,2),S=M[0],D=M[1],P=(0,r.useState)([]),R=_()(P,2),j=R[0],T=R[1],q=(0,r.useState)({id:e.state.currentCi.properties.Id,subType:e.state.currentCi.properties.SubType,displayLabel:e.state.currentCi.properties.DisplayLabel,owner:t(e.state.currentCi.related_properties)}),F=_()(q,2),G=F[0];F[1],(0,r.useEffect)((function(){null!=v&&n.current.fitToViewer()}),[v]),(0,r.useEffect)((function(){null!==e.state.selectedMap.id&&m("https://".concat(e.state.cfg.thost,"/rest/").concat(e.state.cfg.tid,"/frs/file-list/").concat(e.state.selectedMap.id))}),[e.state.selectedMap.id]),(0,r.useEffect)((function(){N()}),[e.state.showOtherCIs]);var N=function(){!0===e.state.showOtherCIs?void 0!==e.state.fetchedData.ciColocated.entities&&e.state.fetchedData.ciColocated.entities.length>0&&e.state.fetchedData.ciColocated.entities.forEach((function(n){if(n.properties.MapKey_c===e.state.selectedMap.id&&n.properties.Id!=e.state.currentCi.properties.Id){var r=n.properties.MapX_c||0,i=n.properties.MapY_c||0,o=n.properties.DisplayLabel;L(r,i,"green",{id:n.properties.Id,subType:n.properties.SubType,displayLabel:o,owner:t(n.related_properties)})}})):e.state.fetchedData.ciColocated.entities.forEach((function(t){null!=n.current&&e.state.currentCi.properties.Id!=t.properties.Id&&Y(t.properties.Id)}))},Y=function(e){var t=n.current.ViewerDOM.getElementsByTagName("svg")[0],r=n.current.ViewerDOM.getElementById(e),i=n.current.ViewerDOM.getElementById("".concat(e,"-text")),o=n.current.ViewerDOM.getElementById("".concat(e,"-rect"));null!==r&&t.removeChild(r),null!==i&&t.removeChild(i),null!==o&&t.removeChild(o)},L=function(t,r,i,o){if(null!==n.current){var a=n.current.ViewerDOM.getElementsByTagName("svg")[0],c=n.current.ViewerDOM.getElementById(o.id),l=n.current.ViewerDOM.getElementById("".concat(o.id,"-text")),u=n.current.ViewerDOM.getElementById("".concat(o.id,"-rect")),s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx",t),s.setAttribute("cy",r),s.setAttribute("r",10),s.setAttribute("stroke",i),s.setAttribute("stroke-width",3),s.setAttribute("fill",i),s.setAttribute("id",o.id),null!==c&&a.removeChild(c),null!==l&&a.removeChild(l),null!==u&&a.removeChild(u);var h=document.createElementNS("http://www.w3.org/2000/svg","rect");h.setAttribute("width","300"),h.setAttribute("height","40"),h.setAttribute("x",t-20),h.setAttribute("y",r-21),h.setAttribute("fill","#fff"),h.setAttribute("stroke",i),h.setAttribute("stroke-width","2"),h.setAttribute("rx","7"),h.setAttribute("id","".concat(o.id,"-rect"));var d="Id:".concat(o.id,"\nSubType:").concat(o.subType,"\nOwner:").concat(o.owner),p=parseInt(new Number(t).toFixed())+20,f=parseInt(new Number(r).toFixed())+7,v=document.createElementNS("http://www.w3.org/2000/svg","text");v.setAttributeNS(null,"x",p),v.setAttributeNS(null,"y",f),v.setAttributeNS(null,"fill",i),v.setAttributeNS(null,"width","100%"),v.setAttributeNS(null,"height","auto"),v.setAttributeNS(null,"font-size","22"),v.setAttributeNS(null,"id","".concat(o.id,"-text")),v.appendChild(document.createTextNode(o.displayLabel)),s.appendChild(I(d)),h.appendChild(I(d)),v.appendChild(I(d)),a.appendChild(h),a.appendChild(s),a.appendChild(v),o.id===e.state.currentCi.properties.Id&&D({x:t,y:r,rootObj:a,childObj:[s,h,v]})}},I=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","title"),n=document.createTextNode(e);return t.appendChild(n),t},W=function(e,t,n,r){L(e,t,n,r);var i=j,o=r.id,a=r.displayLabel;i.push({x:e,y:t,color:n,id:o,label:a}),T(i)},H=function(){if(j.length>1){var e=j;e.pop(),T(e);var t=e[e.length-1];L(t.x,t.y,"red",G)}},z=function(t){t.preventDefault(),Y(e.state.currentCi.properties.Id),D({}),T([]),w({})},B=function(t){t.preventDefault();var n,r,i,o={entities:[{entity_type:e.state.srcObj.recType,properties:{MapKey_c:e.state.selectedMap.id,MapName_c:e.state.selectedMap.file_name,MapX_c:S.x,MapY_c:S.y,Id:e.state.srcObj.id},related_properties:{}}],operation:"UPDATE"};C(!0),(n={thost:e.state.cfg.thost,tport:e.state.cfg.tport,tid:e.state.cfg.tid,token:e.state.token,body:o},r="https://".concat(n.thost,":").concat(n.tport,"/rest/").concat(n.tid,"/ems/bulk"),i=n.body,x().post(r,i,{withCredentials:!0,headers:{"Content-Type":"application/json"}})).then((function(e){console.log(e.data),w(!1),C(!1)})).catch((function(e){console.log(e)}))};return null!==v?r.createElement("div",null,null!==v?r.createElement("div",{ref:i},r.createElement(X,{src:v,doDraw:function(){null!==e.state.selectedMap.id&&null!==e.state.selectedMap.file_name&&null!==e.state.selectedPoint.x&&null!==e.state.selectedPoint.y&&e.state.selectedMap.id===e.state.currentCi.properties.MapKey_c&&W(e.state.selectedPoint.x,e.state.selectedPoint.y,"red",G)},render:function(t){return r.createElement(r.Fragment,null,r.createElement(Pt,{ref:n,width:1100,height:600,tool:c,onChangeTool:l,value:h,onChangeValue:d,undo:H,Toolbar:Vt,onClick:function(e){return function(e){e.preventDefault(),w(!0);var t=e.point.x-.25*e.point.x,n=e.point.y-.25*e.point.y;W(t,n,"red",G)}(e)}},r.createElement("svg",{width:2500,height:1200},t)),r.createElement("div",{className:"ui hidden divider"}),r.createElement("div",{className:"ui menu"},r.createElement("div",{className:"ui buttons"},r.createElement("button",{className:!0===b?"ui button":"ui button disabled",onClick:z},"Clear"),r.createElement("div",{className:"or"}),r.createElement("button",{className:!0===b?"ui positive button":"ui positive button disabled",onClick:B},"Save")),r.createElement("div",{className:"right menu"},r.createElement("div",{class:"item"},r.createElement("div",{className:"ui checkbox"},r.createElement("input",{type:"checkbox",checked:e.state.showOtherCIs,name:"example",onClick:function(){e.switchStateField(["showOtherCIs"],[!e.state.showOtherCIs])}}),r.createElement("label",null,"Show other CIs"))))))}})):r.createElement("div",null,"LOADING"),!0===e.state.showOtherCIs&&void 0!==e.state.fetchedData.ciColocated.entities&&e.state.fetchedData.ciColocated.entities.length>0?r.createElement("div",{className:"ui relaxed divided list"},e.state.fetchedData.ciColocated.entities.filter((function(t){return t.properties.Id!=e.state.currentCi.properties.Id&&t.properties.MapKey_c===e.state.selectedMap.id})).map((function(i,o){return r.createElement("div",{className:"item",key:"".concat(o,"-").concat(i.properties.Id)},r.createElement("i",{className:"large server middle aligned icon"}),r.createElement("div",{className:"content",onMouseEnter:function(e){return function(e,t){e.preventDefault();var r=n.current.ViewerDOM.getElementById("".concat(t,"-rect"));null!==r&&r.setAttributeNS(null,"fill","gold")}(e,i.properties.Id)},onMouseLeave:function(e){return function(e,t){e.preventDefault();var r=n.current.ViewerDOM.getElementById("".concat(t,"-rect"));null!==r&&r.setAttributeNS(null,"fill","white")}(e,i.properties.Id)}},r.createElement("a",{href:"https://".concat(e.state.cfg.thost,"/saw/Device/").concat(i.properties.Id,"/general?TENANTID=").concat(e.state.cfg.tid),className:"header",target:"_blank"},i.properties.DisplayLabel),r.createElement("div",{className:"description"},t(i.related_properties))))}))):"",!1===E?"":r.createElement(A,{title:"Saving coordinates in SMAX record"})):""}Pt.propTypes={width:F().number.isRequired,height:F().number.isRequired,value:F().oneOfType([F().object,F().shape({version:F().oneOf([2]).isRequired,mode:F().oneOf([H,z,B]).isRequired,focus:F().bool.isRequired,a:F().number.isRequired,b:F().number.isRequired,c:F().number.isRequired,d:F().number.isRequired,e:F().number.isRequired,f:F().number.isRequired,viewerWidth:F().number.isRequired,viewerHeight:F().number.isRequired,SVGMinX:F().number.isRequired,SVGMinY:F().number.isRequired,SVGWidth:F().number.isRequired,SVGHeight:F().number.isRequired,startX:F().number,startY:F().number,endX:F().number,endY:F().number,miniatureOpen:F().bool.isRequired})]).isRequired,onChangeValue:F().func.isRequired,tool:F().oneOf([U,Z,K,Q,J,pe]).isRequired,onChangeTool:F().func.isRequired,background:F().string,SVGBackground:F().string,SVGStyle:F().object,style:F().object,className:F().string,detectWheel:F().bool,detectAutoPan:F().bool,detectPinchGesture:F().bool,onZoom:F().func,onPan:F().func,onClick:F().func,onDoubleClick:F().func,onMouseUp:F().func,onMouseMove:F().func,onMouseDown:F().func,preventPanOutside:F().bool,scaleFactor:F().number,scaleFactorOnWheel:F().number,scaleFactorMax:F().number,scaleFactorMin:F().number,modifierKeys:F().array,disableDoubleClickZoomWithToolAuto:F().bool,customMiniature:F().oneOfType([F().element,F().func]),miniatureProps:F().shape({position:F().oneOf([$,te,re]),background:F().string,width:F().number,height:F().number}),customToolbar:F().oneOfType([F().element,F().func]),toolbarProps:F().shape({position:F().oneOf([$,ee,te,ne,re]),SVGAlignX:F().oneOf([ae,ce,le]),SVGAlignY:F().oneOf([ae,ue,se]),activeToolColor:F().string}),children:function(e,t,n){var i=e[t],o=["svg"];return 1!==r.Children.count(i)||-1===o.indexOf(i.type)?new Error("`"+n+"` should have a single child of the following types:  `"+o.join("`, `")+"`."):i.props.hasOwnProperty("width")&&i.props.hasOwnProperty("height")||i.props.hasOwnProperty("viewBox")?void 0:new Error("SVG should have props `width` and `height` or `viewBox`")}},Pt.defaultProps={style:{},background:"#616264",SVGBackground:"#fff",SVGStyle:{},detectWheel:!0,detectAutoPan:!0,detectPinchGesture:!0,modifierKeys:["Alt","Shift","Control"],preventPanOutside:!0,scaleFactor:1.1,scaleFactorOnWheel:1.06,disableZoomWithToolAuto:!1,onZoom:null,onPan:null,toolbarProps:{},miniatureProps:{}},(function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(e){var t;return u()(this,o),(t=i.call(this,e)).state={value:e.defaultValue||{},tool:e.defaultTool||Z},t.Viewer=null,t.changeTool=t.changeTool.bind(p()(t)),t.changeValue=t.changeValue.bind(p()(t)),t}return h()(o,[{key:"changeTool",value:function(e){this.setState({tool:e})}},{key:"changeValue",value:function(e){this.setState({value:e})}},{key:"pan",value:function(e,t){this.Viewer.pan(e,t)}},{key:"zoom",value:function(e,t,n){this.Viewer.zoom(e,t,n)}},{key:"fitSelection",value:function(e,t,n,r){this.Viewer.fitSelection(e,t,n,r)}},{key:"fitToViewer",value:function(e,t){this.Viewer.fitToViewer(e,t)}},{key:"zoomOnViewerCenter",value:function(e){this.Viewer.zoomOnViewerCenter(e)}},{key:"setPointOnViewerCenter",value:function(e,t,n){this.Viewer.setPointOnViewerCenter(e,t,n)}},{key:"reset",value:function(){this.Viewer.reset()}},{key:"openMiniature",value:function(){this.Viewer.openMiniature()}},{key:"closeMiniature",value:function(){this.Viewer.closeMiniature()}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,i=t.height,o=(t.onChangeTool,t.onChangeValue,I()(t,["width","height","onChangeTool","onChangeValue"])),a=this.state,c=a.tool,l=a.value;return r.createElement(Pt,Y()({width:n,height:i,tool:c,onChangeTool:this.changeTool,value:l,onChangeValue:this.changeValue,ref:function(t){return e.Viewer=t}},o))}}]),o}(r.Component)).propTypes={width:F().number.isRequired,height:F().number.isRequired,defaultValue:F().object,defaultTool:F().string};var jt=function(e){v()(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=b()(t);if(n){var i=b()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g()(this,e)});function o(e){var t;return u()(this,o),t=i.call(this,e),O()(p()(t),"getHeaderText",(function(){console.log(t.state);var e="Data loading...";switch(t.state.mode){case"unknown":e="The data is being prepared";break;case"mapview":e="View the location file ".concat(t.state.selectedMap.file_name);break;case"mapselection":e="SELECT a map from the list";break;case"nomaps":e="There is no map attached to the Location...";break;default:e="ERROR"}return e})),t.state={cfg:{},token:null,spinner:!1,originalUrl:"/",mode:"unknown",showOtherCIs:!1,previousMode:"unknown",currentCi:{},srcObj:{id:null,recType:null},tgtObj:{id:null,recType:null},fileList:[],originalQuery:{mapKey:null,mapName:null,x:null,y:null},selectedMap:{id:null,file_name:null},tmpSelectedMap:{id:null,file_name:null},selectedPoint:{x:null,y:null},fetchedData:{}},t.renderSpinner=S.bind(p()(t)),t.switchStateField=D.bind(p()(t)),t}return h()(o,[{key:"componentDidMount",value:function(){var e="mapselection";if(window.initial_state){var t=null,n=null,r=window.initial_state.requestData.queryCoords.mapKey,i=window.initial_state.requestData.srcObj.id;null!==window.initial_state.token?(Object.keys(window.initial_state.fetchedData.ciColocated).length>0&&window.initial_state.fetchedData.ciColocated.entities.length>0&&(n=window.initial_state.fetchedData.ciColocated.entities.find((function(e){return e.properties.Id===i})),"object"===c()(n)&&n.properties.id&&(e="mapview")),null!==r?Object.keys(window.initial_state.fetchedData.locationFiles).length>0&&window.initial_state.fetchedData.locationFiles.length>0?(t=window.initial_state.fetchedData.locationFiles.find((function(e){return e.id===r})),"object"===c()(t)&&t.id&&(e="mapview")):e="error":0===Object.keys(window.initial_state.fetchedData.locationFiles).length&&(e="nomaps")):e="error";var o=["cfg","token","srcObj","tgtObj","queryCoords","fetchedData","originalUrl","mode"],a=[window.initial_state.cfg,window.initial_state.token,window.initial_state.requestData.srcObj,window.initial_state.requestData.tgtObj,window.initial_state.requestData.queryCoords,window.initial_state.fetchedData,window.initial_state.originalUrl,e];null!==n&&(o.push("currentCi"),a.push(n)),"mapview"===e&&(o.push("selectedMap"),a.push({id:t.id,file_name:t.file_name}),null!==window.initial_state.requestData.queryCoords.x&&null!==window.initial_state.requestData.queryCoords.y&&(o.push("selectedPoint"),a.push({x:window.initial_state.requestData.queryCoords.x,y:window.initial_state.requestData.queryCoords.y}))),this.switchStateField(o,a)}}},{key:"renderContent",value:function(){return"mapview"===this.state.mode?r.createElement(Rt,{state:this.state,switchStateField:this.switchStateField}):"mapselection"===this.state.mode?r.createElement(j,{switchStateField:this.switchStateField,state:this.state}):""}},{key:"render",value:function(){return r.createElement("div",{className:"ui container"},r.createElement(R,{title:this.getHeaderText()}),r.createElement(P,{switchStateField:this.switchStateField,state:this.state}),this.renderContent())}}]),o}(r.Component);O()(jt,"fetchData",(function(e){return function(e){var t=x().create({httpsAgent:new(k().Agent)({rejectUnauthorized:!1})}),n="https://".concat(e.thost,":").concat(e.tport,"/rest/").concat(e.tid,"/ems/").concat(e.objType,"?layout=").concat(e.layout);return null!==e.filter&&(n+="&filter=".concat(e.filter)),t.get(n,{headers:O()({"Content-Type":"application/json","User-Agent":"Apache-HttpClient/4.1",Cookie:"TENANTID=".concat(e.tid)},"Cookie","SMAX_AUTH_TOKEN=".concat(e.token))}).then((function(e){return e.data})).catch((function(t){return console.log("ERROR fetching data: "),console.log(e),console.log(t),null}))}(e)})),i.hydrate(r.createElement(o.VK,null,r.createElement(jt,null)),document.getElementById("app"))},2574:()=>{},1758:()=>{}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0},t=[[8246,736]],r=()=>{};function i(){for(var r,i=0;i<t.length;i++){for(var o=t[i],a=!0,c=1;c<o.length;c++){var l=o[c];0!==e[l]&&(a=!1)}a&&(t.splice(i--,1),r=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),r}n.x=()=>{n.x=()=>{},a=a.slice();for(var e=0;e<a.length;e++)o(a[e]);return(r=i)()};var o=i=>{for(var o,a,[l,u,s,h]=i,d=0,p=[];d<l.length;d++)a=l[d],n.o(e,a)&&e[a]&&p.push(e[a][0]),e[a]=0;for(o in u)n.o(u,o)&&(n.m[o]=u[o]);for(s&&s(n),c(i);p.length;)p.shift()();return h&&t.push.apply(t,h),r()},a=self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[],c=a.push.bind(a);a.push=o})(),n.x()})();
//# sourceMappingURL=main.js.map